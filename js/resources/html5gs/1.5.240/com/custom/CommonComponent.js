function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var TabComp=function(){var a,p={x:0,y:0,width:600,height:600,tabs:["LABEL 1","LABEL 2"],tabwidth:"auto",shadowMargin:20,leftMargin:20,labelSize:"0.7em",tabHeight:23,tabType:"normal",selectedTab:0,setable:!0,tabEnableArray:[]},o=this,n=new Array,i=new Array;this.init=function(e){for(var t in e)p[t]=e[t];p.x=globalResizeCalc(p.x),p.y=globalResizeCalc(p.y),p.width=globalResizeCalc(p.width),p.height=globalResizeCalc(p.height),p.shadowMargin=globalResizeCalc(p.shadowMargin),p.leftMargin=globalResizeCalc(p.leftMargin),p.tabHeight=globalResizeCalc(p.tabHeight),function(){var e=document.createElement("div");p.target?p.target.append(e):$(gConfig.elContainer).append(e);p.target=$(e),0==p.visible&&p.target.css("display","none"),p.index&&p.target.css("z-index",p.index),p.target.css({position:"absolute",left:p.x+"px",top:p.y+"px",width:p.width+"px",height:p.height+"px"}),s("#e5e5e5",!0,!1),a=document.createElement("div"),p.target.append(a),$(a).css({position:"absolute",left:p.shadowMargin+"px",top:p.shadowMargin+(p.tabHeight-1)+"px",width:p.width-2*p.shadowMargin+"px",height:p.height-2*p.shadowMargin-p.tabHeight+"px",background:"#FFFFFF","box-shadow":"rgba(0, 0, 0, 0.5) 0px 0px 20px"}),"simulation"!=p.tabType?(p.tabColors?($(a).css("background",""==p.tabColors[0]?"#FFFFFF":p.tabColors[0]),s("#FFFFFF",!1,!1,n,p.tabColors)):s("#FFFFFF",!1,!1,n),s("rgba(255, 0, 0, 0.5)",!1,!0,i)):p.tabColors&&$(a).css("background",""==p.tabColors[0]?"#FFFFFF":p.tabColors[0]);!function(){for(var e=0;e<n.length;e++)e==p.selectedTab?$(n[e]).show():$(n[e]).hide()}()}()},this.addEventListener=function(e,t){p[e]=t};var e=!0;function s(e,t,i,o,a){for(var n=p.leftMargin,s=0;s<p.tabs.length;s++){p.tabEnableArray[s]=!0;var r="number"==typeof p.tabwidth?globalResizeCalc(p.tabwidth):(p.width-2*p.shadowMargin)/p.tabs.length;"auto"!=p.tabwidth&&p.tabwidth.length&&p.tabwidth[s]&&(r=globalResizeCalc(p.tabwidth[s])),a&&a[s]&&(e=a[s]);var l=document.createElement("div");if(p.target.append(l),$(l).attr("tabid","tabComp_"+s),$(l).css({position:"absolute",left:n+"px",top:p.shadowMargin+"px",width:r+"px",height:p.tabHeight+"px",overflow:"hidden",background:"rgba(0, 0, 0, 0)"}),"simulation"==p.tabType)p.tabColors?$(l).css({background:""==p.tabColors[0]?"#FFFFFF":p.tabColors[0]}):$(l).css({background:"rgba(255, 255, 255, 1)"}),$(l).css("cursor","default"),$(l).css({left:p.leftMargin+"px","z-index":"1"}),$(l).html('<div style="position: relative; text-align:center; font-size:'+p.labelSize+"; display: table-cell; width: "+r+"px; height: "+p.tabHeight+'px; vertical-align: middle;">'+p.tabs[s]+"</div>");else if(i)$(l).css("cursor","pointer"),$(l).append('<div style="position: relative; text-align:center; font-size:'+p.labelSize+"; color:#333; display: table-cell; width: "+r+"px; height: "+p.tabHeight+'px; vertical-align: middle;" p_title="'+(p.title?GCTConv(p.title):GetGlobalTooltip("tooltip","tabs"))+'">'+p.tabs[s]+"</div>"),$(l).bind("click",u),BrowserDetect.any()?$(l).bind("touchstart",u).bind("touchend",u):$(l).bind("mousedown",u);else{var d=document.createElement("canvas");$(l).append(d);var c=d.getContext("2d");d.width=r,d.height=p.tabHeight,c.fillStyle=e,c.moveTo(globalResizeCalc(10),0),c.lineTo(d.width,0),c.lineTo(d.width,d.height),c.lineTo(0,d.height),c.lineTo(globalResizeCalc(10),0),c.fill()}o&&o.push(l),n+=r}}function u(e){if("mousedown"==e.type||"touchstart"==e.type)focusOutInput(),audioPlayerObj.playAudio("down"),"mousedown"==e.type&&$(document).unbind("mouseup",u).bind("mouseup",u);else if("mouseup"==e.type||"touchend"==e.type)audioPlayerObj.playAudio("up"),$(document).unbind("mouseup",u);else{var t;t="pseudo"==e.event?e.selectedTab:$(this).attr("tabid");for(var i=0;i<n.length;i++)$(n[i]).attr("tabid")==t?($(n[i]).show(),p.tabColors?$(a).css("background",""==p.tabColors[i]?"#FFFFFF":p.tabColors[i]):$(a).css("background","#FFFFFF"),o=i,p.selectedTab=o):$(n[i]).hide();e.index=Number(t.split("_")[1]),p.change&&p.change(e)}var o}this.show=function(){e=!0,p.target.show()},this.hide=function(){e=!1,p.target.hide()},this.activeTab=function(e){if(void 0===e)return p.selectedTab;for(var t=0;t<n.length;t++)if($(n[t]).attr("tabid").split("_")[1]==e){$(i[t]).trigger("click");break}},this.setDisableTab=function(e){p.tabEnableArray[e]=!1,$(i[e]).unbind("click",u),$(i[e]).css({opacity:.5,cursor:"default"})},this.setEnableTab=function(e){p.tabEnableArray[e]=!0,$(i[e]).unbind("click",u).bind("click",u),$(i[e]).css({opacity:1,cursor:"pointer"})};var t=!0;this.getter=function(){return t=!0,-1==p.tabEnableArray.indexOf(!0)&&(t=!1),p.getterLabel?{values:{selectedTab:p.selectedTab,label:p.tabs[p.selectedTab]},caption:p.caption?p.caption:"Tab",common:!0,componentname:"TabComp",settable:p.setable,enabled:t,visible:e}:{values:{selectedTab:p.selectedTab},caption:p.caption?p.caption:"Tab",common:!0,componentname:"TabComp",settable:p.setable,enabled:t,visible:e}},this.setter=function(e){if(e.visible?o.show():0==e.visible&&o.hide(),e.enabled){var t=p.tabEnableArray;for(var i in p.tabEnableArray)o.setEnableTab(i);for(var i in t)t[i]||o.setDisableTab(i)}if(!e.enabled)for(var i in p.tabEnableArray)o.setDisableTab(i);(e.values.selectedTab||0==e.values.selectedTab)&&u({selectedTab:"tabComp_"+e.values.selectedTab,event:"pseudo"})},this.getCaption=function(){return p.caption},this.isSetable=function(){return p.setable}},SliderComp=function(){var o,a={x:0,y:0,width:10,height:10,color:1,min:0,max:100,value:50,inverse:!1,horizontal:!0,autoTrigger:!1,knobHeight:35,knobWidth:11,willHighLight:!1,setable:!0},n=this,s=!1,t=!0,i=document.createElement("canvas"),r=document.createElement("canvas"),e=i.getContext("2d"),l=new Image;l.onload=p,this.init=function(e){for(var t in e)a[t]=e[t];if(a.x=globalResizeCalc(a.x),a.y=globalResizeCalc(a.y),a.width=globalResizeCalc(a.width),a.height=globalResizeCalc(a.height),a.knobWidth=globalResizeCalc(a.knobWidth),a.knobHeight=globalResizeCalc(a.knobHeight),void 0!==a.knobColor&&(a.color=3),a.color)switch(a.color){case 1:a.color="#F44D3F";break;case 2:a.color="#4B53EC";break;case 3:a.color="#979797"}var i=document.createElement("div");a.target?a.target.append(i):$(gConfig.elContainer).append(i),a.target=$(i),0==a.visible&&a.target.css("display","none"),a.index&&a.target.css("z-index",a.index),null!=a.target&&(a.target.css({position:"absolute",left:a.x+"px",top:a.y+"px"}),o=document.createElement("div"),a.target.append(o),$(o).slider(),$(o).css({position:"absolute",left:"0px",top:globalResizeCalc(13)+"px",width:a.width+"px",height:a.height+"px",background:a.color,"border-radius":"5px","box-shadow":"3px 5px 5px rgba(0,0,0,0.5) inset"}),$(o).children("a").css({position:"absolute","text-align":"center",outline:"none"}),$(o).slider({min:a.min,max:a.max,orientation:a.horizontal?"horizontal":"vertical",step:a.step?a.step:null,change:g,create:g,slide:g,start:g,stop:g}),a.horizontal?($(o).children("a").css({top:"0px",left:"0px",width:globalResizeCalc(25)+"px",height:a.knobHeight+"px","margin-top":-(a.knobHeight-a.height)/2+"px","margin-left":-(a.knobHeight-a.height)/2+"px"}),$(r).css({position:"absolute",top:globalResizeCalc(1)+"px",left:globalResizeCalc(13)+"px",width:globalResizeCalc(3)+"px",height:globalResizeCalc(33)+"px"})):($(o).children("a").css({bottom:"0px",left:"0px",width:a.knobHeight+"px",height:globalResizeCalc(15)+"px","margin-bottom":globalResizeCalc(-8)+"px","margin-left":-(a.knobHeight-a.width)/2+"px"}),$(r).css({position:"absolute",top:globalResizeCalc(8)+"px",left:globalResizeCalc(1)+"px",width:globalResizeCalc(33)+"px",height:globalResizeCalc(4)+"px"})),n.enable(),$(o).slider("option","value",a.inverse?a.max+a.min-a.value:a.value),l.src=gConfig.paths.comImg+"slider_grad.png",a.autoTrigger&&setTimeout(function(){c("slide"),c("change")},10))},this.setCss=function(e){a.target.css(e)},this.value=function(e){if(null==e)return a.value;a.minStep&&$(o).slider("option","step",a.minStep),$(o).slider("value",e),$(o).slider("option","step",a.step)},this.addEventListener=function(e,t){a[e]=t},this.show=function(e){h&&(t=!0,a.visiblityChanged&&a.visiblityChanged({show:!0,isFromSetter:e}),a.target.show())},this.hide=function(e){a.visiblityChanged&&a.visiblityChanged({show:!1,isFromSetter:e}),t=!1,a.target.hide()};var d=!0;function c(e){$slider=$(o);var t={id:a.id,type:e,value:a.value},i={value:a.value};$slider.slider("option",e).call($slider,t,i)}function p(){a.willHighLight&&$(o).children("a").append(r),$(o).children("a").append(i),a.title?n.updateTitle(a.title):n.updateTitle(GetGlobalTooltip("tooltip","sliderKnob")),i.width=a.knobWidth,i.height=a.knobHeight,a.horizontal?($(i).css({transform:"rotate(0deg)","-webkit-transform":"rotate(0deg)","-ms-transform":"rotate(0deg)"}),i.width=a.knobWidth,i.height=a.knobHeight):($(i).css({position:"absolute",top:globalResizeCalc(4)+"px",left:"0px"}),i.width=a.knobHeight,i.height=a.knobWidth,e.translate(0,a.knobWidth),e.rotate(-Math.PI/2)),e.beginPath(),e.moveTo(globalResizeCalc(1.5),globalResizeCalc(1.5)),e.bezierCurveTo(globalResizeCalc(5.5),globalResizeCalc(-1.5),globalResizeCalc(5.5),globalResizeCalc(-1.5),globalResizeCalc(9.5),globalResizeCalc(1.5)),e.bezierCurveTo(globalResizeCalc(12),globalResizeCalc(17),globalResizeCalc(12),globalResizeCalc(17),globalResizeCalc(9.5),globalResizeCalc(34)),e.bezierCurveTo(globalResizeCalc(5.5),globalResizeCalc(37.5),globalResizeCalc(5.5),globalResizeCalc(37.5),globalResizeCalc(1.5),globalResizeCalc(34)),e.bezierCurveTo(globalResizeCalc(-1.5),globalResizeCalc(17),globalResizeCalc(-1.5),globalResizeCalc(17),globalResizeCalc(1.5),globalResizeCalc(1.5)),e.fillStyle=void 0!==a.knobColor?a.knobColor:a.color,e.fill(),e.drawImage(l,0,0,a.knobWidth,a.knobHeight)}function u(e){"mousedown"==e.type&&$(document).unbind("mouseup",u).bind("mouseup",u),"mousedown"==e.type||"touchstart"==e.type?(e.type="mousedown",addPointerGrabbing(!0),audioPlayerObj.playAudio("down")):"mouseup"!=e.type&&"touchend"!=e.type||(e.type="mouseup",addPointerGrabbing(!1),audioPlayerObj.playAudio("up"),$(document).unbind("mouseup",u)),a[e.type]&&a[e.type](e)}function g(e,t){var i=!1;switch(a.id&&(e.id=a.id),e.value=a.inverse?a.max+a.min-Number(t.value):t.value,e.type){case"slidechange":e.type="change";break;case"slidecreate":e.type="create";break;case"slide":if(void 0!==a.restrictMax&&a.restrictMax<t.value&&(e.value=a.restrictMax,$(o).slider("value",a.restrictMax),i=!0),void 0!==a.restrictMin&&a.restrictMin>t.value&&(e.value=a.restrictMin,$(o).slider("value",a.restrictMin),i=!0),s)return!1;e.type="slide";break;case"slidestart":e.type="start";break;case"slidestop":e.type="stop",a.restrictMax&&$(o).slider("value")>a.restrictMax&&$(o).slider("value",a.restrictMax),a.restrictMin&&$(o).slider("value")<a.restrictMin&&$(o).slider("value",a.restrictMin)}if(a.value=e.value,a.restrictMax&&a.value>=a.restrictMax&&(a.value=a.restrictMax),a.restrictMin&&a.value<=a.restrictMin&&(a.value=a.restrictMin),e.value=a.value,a[e.type]&&a[e.type](e,t),i)return!1}this.enable=function(){if(b){s=!(d=!0),$(o).slider("option","disabled",!1),$(o).css("opacity","1");var e=$(o).children("a").attr("style");e&&-1!=e.indexOf("cursor")&&(e=e.replace(e.substring(e.indexOf("cursor"),e.indexOf(";",e.indexOf("cursor"))+1),""),$(o).children("a").attr("style",e)),$(o).children("a").addClass("commongrab").removeAttr("href"),BrowserDetect.any()?($(o).unbind("touchstart",u).bind("touchstart",u),$(o).unbind("touchend",u).bind("touchend",u)):$(o).unbind("mousedown",u).bind("mousedown",u)}},this.disable=function(){s=!(d=!1),$(o).slider("option","disabled",!0),$(o).css("opacity","0.5"),$(o).children("a").removeClass("commongrab"),$(o).children("a").css("cursor","default"),BrowserDetect.any()?$(o).unbind("touchstart",u).unbind("touchend",u):$(o).unbind("mousedown",u)},this.updateMaxMin=function(e){for(var t in e)a[t]=e[t];a.value=a.value>a.max?a.max:a.value<a.min?a.min:a.value,$(o).slider({min:a.min,max:a.max,value:a.value,step:a.step})},this.getMaxMin=function(){return{min:a.min,max:a.max}},this.updateRestrictMax=function(e){a.restrictMax=e},this.updateRestrictMin=function(e){a.restrictMin=e},this.updateTitle=function(e){a.title=e,$(i).attr("p_title",GCTConv(a.title)),$(o).children("a").attr("p_title",GCTConv(a.title))},this.changeColor=function(e,t,i){a.color=e,i||p(),t||$(o).css({background:a.color})},this.visibleKnob=function(e){e?($(i).show(),$(r).show()):($(i).hide(),$(r).hide())},this.setHighLightKnob=function(e,t,i,o){e?(void 0===i&&(i=5),void 0===o&&(o=1),$(r).css("box-shadow","0px 0px "+globalResizeCalc(i)+"px "+globalResizeCalc(o)+"px "+t)):$(r).css("box-shadow","")},this.getGSvisible=function(){return h},this.setGSvisible=function(e){h=e},this.getGSenable=function(){return b},this.setGSenable=function(e){b=e},this.getter=function(){return{caption:a.caption?a.caption:a.id,common:!0,componentname:"SliderComp",values:{value:this.value(),color:a.color},settable:a.setable,enabled:getterSetter.isFromInit?d:b,visible:getterSetter.isFromInit?t:h}};var h=!0,b=!0;function c(e){$slider=$(o);var t={id:a.id,type:e,value:a.value},i={value:a.value};$slider.slider("option",e).call($slider,t,i)}this.setter=function(e){if(h!=e.visible&&((h=e.visible)?(n.show(!0),a.sliderVisible&&a.sliderVisible({flag:!0,isFromSetter:!0})):(n.hide(!0),a.sliderVisible&&a.sliderVisible({flag:!1,isFromSetter:!0}))),b!=e.enabled&&((b=e.enabled)?n.enable():n.disable()),getterSetter.isFromReset&&(b=h=!0),e.values){for(var t in e.values)switch(t){case"value":this.value(e.values[t]);break;case"color":this.changeColor(""+e.values[t])}c("slide"),c("change")}},this.getCaption=function(){return a.caption},this.isSetable=function(){return a.setable}},CheckBoxComp=function(){var r,l,d={id:"unnamed",checked:!0,label:"",x:0,y:0,width:411,fontSize:"1em",labelColor:"#000000",labelTextShadow:"none",setable:!0,isEnable:!0,overrideIsEnableCheck:!1},c=this,p=new Image;p.onload=n,this.init=function(e){for(var t in e)d[t]=e[t];d.x=globalResizeCalc(d.x),d.y=globalResizeCalc(d.y);var i=document.createElement("div");d.target?d.target.append(i):$(gConfig.elContainer).append(i),d.target=$(i),0==d.visible&&d.target.css("display","none"),d.index&&d.target.css("z-index",d.index),d.target.css({position:"absolute",left:d.x+"px",top:d.y+"px",width:d.width+"px","font-size":d.fontSize,cursor:"pointer"}),r=document.createElement("canvas"),d.target.append(r),r.width=globalResizeCalc(30),r.height=globalResizeCalc(30),$(r).css({position:"absolute",left:"0px",top:"0px"}).attr("id","cb_bg_"+d.id),d.title?$(r).attr("p_title",GCTConv(d.title)):$(r).attr("p_title",GetGlobalTooltip("tooltip","genricClick"));var o=function(e,t){$(".wrapper").append("<span class='sampleTextDiv' style='font-size:"+t+";display:none'>"+e+"</span>");var i=new Object;return i.width=$(".sampleTextDiv").width(),i.height=$(".sampleTextDiv").height(),$(".sampleTextDiv").remove(),i}(d.label,d.fontSize),a=(r.height,o.height,document.createElement("div"));$(a).css({position:"absolute",left:"0px",top:r.height/2+"px",height:"1px",width:"100%",display:"none"}),d.target.append(a);var n=document.createElement("div");if($(n).css({position:"absolute",left:r.width+globalResizeCalc(5)+"px",height:r.height+"px",display:"table"}),d.target.append(n),l=document.createElement("span"),$(n).append(l),$(l).css({"white-space":"nowrap",color:d.labelColor,"text-shadow":d.labelTextShadow,display:"table-cell","vertical-align":"middle"}).html(d.label).attr("id","label_"+d.id),0<$(l).children().length){var s=$(l).children();$(s).attr("style","")}d.verticalAlign&&$(l).css("top",globalResizeCalc(-5)+"px"),d.title?$(l).attr("p_title",GCTConv(d.title)):$(r).attr("p_title",GetGlobalTooltip("tooltip","genricClick")),c.setEnable(),p.src=gConfig.paths.comImg+"cb.png",u=0!=d.visible},this.addEventListener=function(e,t){d[e]=t},this.setLabel=function(e){$(l).html(e)},this.setTitle=function(e){d.title=e,$(l).attr("p_title",GCTConv(d.title)),$(r).attr("p_title",GCTConv(d.title))},this.setLabelColor=function(e){d.labelColor=e,$(l).css({color:d.labelColor})},this.getLabelColor=function(){return d.labelColor},this.setStatus=function(e){d.checked=!!e,n()},this.getStatus=function(){return d.checked},this.setEnable=function(e){b&&(d.isEnable=!0,d.target.css({cursor:"pointer",opacity:1}),BrowserDetect.any()?d.target.unbind("touchstart",o).bind("touchstart",o).unbind("touchend",o).bind("touchend",o):BrowserDetect.ChromeBook()||BrowserDetect.WindowsTouch()?d.target.unbind("mousedown touchstart",o).bind("mousedown touchstart",o):(d.target.unbind("click",o).bind("click",o),d.target.unbind("mousedown",o).bind("mousedown",o)),d.ifEnable&&d.ifEnable({status:!0,pseudo:e}))},this.setDisable=function(e){d.isEnable=!1,d.target.css({cursor:"default",opacity:.5}),BrowserDetect.any()?d.target.unbind("touchstart",o).unbind("touchend",o):BrowserDetect.ChromeBook()||BrowserDetect.WindowsTouch()?(d.target.unbind("click",o),d.target.unbind("mousedown touchstart",o)):(d.target.unbind("click",o),d.target.unbind("mousedown",o)),d.ifEnable&&d.ifEnable({status:!1,pseudo:e})};var u=d.visible;function o(e){if("mousedown"==e.type||"touchstart"==e.type)focusOutInput(),audioPlayerObj.playAudio("down"),s(!0),$(window).unbind("mouseup touchend",o).bind("mouseup touchend",o),e.preventDefault();else if("mouseup"==e.type||"touchend"==e.type){audioPlayerObj.playAudio("up"),$(window).unbind("mouseup touchend",o),n();var t=$(e.target).attr("id")=="cb_bg_"+d.id||$(e.target).attr("id")=="label_"+d.id,i=BrowserDetect.ChromeBook()||BrowserDetect.WindowsTouch()||BrowserDetect.any();t&&i&&a(e)}"click"==e.type&&a(e)}function a(e){d.checked=!d.checked,n(),e.id=d.id,e.checked=d.checked,d.change&&d.change(e)}function n(){s()}function s(e){r.width=r.width,_lWid=globalResizeCalc(4);var t=r.getContext("2d");t.beginPath(),t.strokeStyle=e?"#545454":"#999999",t.lineWidth=_lWid,t.fillStyle=e?"rgba(153, 153, 153, 0.6)":"rgba(255, 255, 255, 0.6)",t.rect(_lWid/2,_lWid/2,r.width-_lWid,r.height-_lWid),t.fill(),t.stroke(),d.checked&&(t.beginPath(),t.drawImage(p,0,0,r.width,r.height))}this.show=function(e){h&&(u=!0,d.target.show(),d.isShown&&d.isShown({status:!0,isFromSetter:e}))},this.setCss=function(e,t){t?$($(l)[0].parentElement).css(e):d.target.css(e)},this.hide=function(e){u=!1,d.target.hide(),d.isShown&&d.isShown({status:!1,isFromSetter:e})};var i,g="";this.updateValueText=function(e){g=e},this.setGetterAdditionalData=function(e){i=e},this.getGSvisible=function(){return h},this.setGSvisible=function(e){h=e},this.getGSenable=function(){return b},this.setGSenable=function(e){b=e};var h=!0,b=!0;this.getter=function(){var e={checked:d.checked};d.showValueInGetter&&(e.value=g);var t={caption:d.caption?d.caption:d.id,common:!0,componentname:"CheckBoxComp",values:e,settable:d.setable,enabled:getterSetter.isFromInit?d.isEnable:b,visible:getterSetter.isFromInit?u:h};return null!=i&&(t.values.data=i),t},this.setter=function(e){void 0!==e.values.checked&&(d.getable?t=e:(d.checked=!e.values.checked,o({id:d.id,type:"click",event:"pseudo"}))),h!=e.visible&&((h=e.visible)?c.show(!0):c.hide(!0)),b!=e.enabled&&((b=e.enabled)?c.setEnable(!0):c.setDisable(!0)),getterSetter.isFromReset&&(b=h=!0)};var t={};this.getObject=function(){return t},this.getCaption=function(){return d.caption},this.isSetable=function(){return d.setable}},TextFieldComp=function(){var n,s,r,l,d,c,p,u,g,t,h,b={value:5,x:0,y:0,width:57,height:33,border:"none",innerBorder:"none",bgColor:"#E5E5E5",fontSize:"1em",align:"right",paddingTop:4,padding:6,type:"normal",toFixed:0,maxlength:4,incrDecrVarValue:1,autoValidate:!0,showControls:!1,rSideLineShow:!0,preTxt:"",sufTxt:"",isNumber:!0,restrict:"",bgNone:!1,color:"#000000",bold:!1,controlBtnWidth:24,controlBtnHeight:11,controlBtnLineWidth:2,controlBtnPadding:1,controlsSide:"right",showControlsLeft:1,textVerticallyCenterBool:!1,setable:!0,isEnable:!0,restrictAfterDecimal:!1,afterDecimalLength:0,allowChangeOnEnterPress:!0,customBlankVal:!1},m=this;this.init=function(e){for(var t in e)b[t]=e[t];b.x=Math.round(globalResizeCalc(b.x)),b.y=Math.round(globalResizeCalc(b.y)),b.padding=Math.round(globalResizeCalc(b.padding)),b.paddingTop=Math.round(globalResizeCalc(b.paddingTop)),b.showControls?(d=b.width+30,c=b.width,d=Math.round(globalResizeCalc(d)),c=Math.round(globalResizeCalc(c))):d=Math.ceil(globalResizeCalc(b.width)),b.width=Math.round(globalResizeCalc(b.width)),b.height=Math.round(globalResizeCalc(b.height)),b.controlBtnPadding=globalResizeCalc(b.controlBtnPadding),b.restrict="number"==b.restrict?"1234567890.-":b.restrict;var i=document.createElement("div");switch(b.target?b.target.append(i):$(gConfig.elContainer).append(i),b.target=$(i),0==b.visible&&b.target.css("display","none"),b.class&&b.target.attr("class",b.class),b.target.css({position:"absolute",left:b.x+"px",top:b.y+"px",width:d,height:b.height,border:b.border,"padding-top":b.paddingTop+"px","box-sizing":"border-box","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","-ms-box-sizing":"border-box","-o-box-sizing":"border-box",outline:"none","white-space":"nowrap",overflow:"hidden","font-size":b.fontSize,color:b.color}).attr("id",b.id+"_TextField"),b.index&&b.target.css("z-index",b.index),b.bold&&b.target.css("font-weight","bold"),n="normal"==b.type?document.createElement("div"):document.createElement("input"),b.onFocusColor&&$(n).bind("focusin",v),s=document.createElement("div"),b.target.append(s),b.rSideLineShow?(p=document.createElement("div"),g=b.width-globalResizeCalc(8),b.target.append(p)):g=b.width,$(s).css({position:"absolute",width:g,height:b.height,left:"0px",top:"0px",border:b.innerBorder,"box-sizing":"border-box"}),b.bgNone||$(s).css({background:b.bgColor,"box-shadow":"rgba(0, 0, 0, 0.4) 3px 3px 5px inset"}),$(s).append(n),$(n).css({position:"absolute",width:g,height:$(s).height(),left:"0px",top:"0px",border:"0px solid #ff0000",background:"rgba(0,0,0,0)",font:"inherit",color:b.color,"text-align":b.align,padding:"0px "+b.padding+"px","padding-top":b.paddingTop+"px","box-sizing":"border-box",outline:"none","white-space":"nowrap"}),b.bold&&$(n).css("font-weight","bold"),b.title?b.title.textfield?$(n).attr("p_title",GCTConv(b.title.textfield)):$(n).attr("p_title",GCTConv(b.title)):$(n).attr("p_title",GetGlobalTooltip("tooltip","textFeild")),Number(b.rSideLine)){case 1:u="0,172,239";break;case 2:u="75,83,236";break;case 3:u="244,77,63";break;case 4:u="0,168,110";break;case 5:u="154,54,205";break;case 6:u="151,151,151";break;default:u=b.rSideLine}if(b.rSideLineShow&&$(p).css({position:"absolute",width:globalResizeCalc(5)+"px",height:b.height+"px",top:globalResizeCalc(0)+"px",right:globalResizeCalc(0)+"px",background:"rgba("+u+",1)"}),b.showControls){(h=document.createElement("div")).setAttribute("id","isHold"),r=document.createElement("canvas"),l=document.createElement("canvas"),b.target.append(h);var o=b.controlBtnPadding<1?1:b.controlBtnPadding,a=b.buttonBg?globalResizeCalc(24):globalResizeCalc(b.controlBtnWidth+b.controlBtnLineWidth);$(h).css({position:"absolute",left:g+globalResizeCalc(b.showControlsLeft)+"px",top:"0px",width:a+"px",height:b.height+"px",background:"rgba(255, 0, 0, 0)"}),"left"==b.controlsSide&&($(s).css({left:a+"px"}),$(h).css({left:"0px"})),$(h).append(r).append(l),r.width=b.controlBtnWidth,r.height=b.controlBtnHeight,r.disabled=!1,$(r).css({position:"absolute",width:globalResizeCalc(b.controlBtnWidth)+"px",height:globalResizeCalc(b.controlBtnHeight)+"px",left:"4%",top:o+"px"}).attr("data-"+b.id+"_inc","true"),z("inc","normal"),l.width=b.controlBtnWidth,l.height=b.controlBtnHeight,l.disabled=!1,$(l).css({position:"absolute",width:globalResizeCalc(b.controlBtnWidth)+"px",height:globalResizeCalc(b.controlBtnHeight)+"px",left:"4%",bottom:o+"px"}).attr("data-"+b.id+"_dec","true"),z("dec","normal"),b.buttonBg&&($(r).css({"box-shadow":o+"px "+o+"px 0px 0px #999999, -"+o+"px -"+o+"px 0px 0px #FFFFFF",background:b.buttonBg,width:globalResizeCalc(b.controlBtnWidth-4),height:"45%",left:"4%",top:o+"px"}),$(l).css({"box-shadow":o+"px "+o+"px 0px 0px #999999, -"+o+"px -"+o+"px 0px 0px #FFFFFF",background:b.buttonBg,width:globalResizeCalc(b.controlBtnWidth-4),height:"45%",left:"4%",bottom:o+"px"})),b.title&&(b.title.increase?$(r).attr("p_title",GCTConv(b.title.increase)):$(r).attr("p_title",GetGlobalTooltip("tooltip","textFeild")),b.title.decrease?$(l).attr("p_title",GCTConv(b.title.decrease)):$(l).attr("p_title",GetGlobalTooltip("tooltip","textFeild"))),x(!0)}"normal"==b.type&&($(n).css({cursor:"default"}),$(n).removeAttr("p_title")),$(n).unbind("keyup",w).bind("keyup",w),$(n).unbind("focus",w).bind("focus",w),$(n).unbind("keypress",w).unbind("keydown",w),$(n).bind("keypress",w),BrowserDetect.Android()&&$(n).unbind("keyup",w).bind("keyup",w),(b.autoValidate||b.change)&&$(n).unbind("focusout").bind("focusout",w),m.setValue(b.value),C(),f=0!=b.visible},this.validate=function(){var e=m.getValue();if(b.isNumber&&(!b.customBlankVal||""!=e)){e=Number(m.getValue()),e=isNaN(e)?0:e;var t=Math.pow(10,b.toFixed);b.min&&(e=e<b.min?b.min:e,m.setValue(0<b.toFixed?(1*(e*t).toFixed(1)).toFixed(0)/t:0==b.toFixed?Math.round(e):e)),b.max&&(e=e>b.max?b.max:e,m.setValue(0<b.toFixed?(1*(e*t).toFixed(1)).toFixed(0)/t:0==b.toFixed?Math.round(e):e))}},this.addEventListener=function(e,t){b[e]=t},this.dispatchEvent=function(e){b[e]&&b[e]()},this.getValue=function(){if("normal"==b.type)return b.textVerticallyCenterBool?$(n).find("span").text():$(n).text();var e=$(n).val();return""!=b.preTxt?e=e.replace(b.preTxt,""):""!=b.sufTxt&&(e=e.replace(b.sufTxt,"")),e},this.setValue=function(e){if(e=b.toFixed&&!isNaN(e)?((10*e).toFixed(b.toFixed-1)/10).toFixed(b.toFixed):null==e?"":e,e=b.preTxt+e+b.sufTxt,"normal"==b.type){$(n).css({display:"table",padding:"0px","padding-right":"2px"}).empty();var t=document.createElement("span");$(t).css({display:"table-cell","vertical-align":"middle",padding:"0px "+b.padding+"px","padding-top":b.paddingTop+"px"}),$(t).html(e),$(n).append(t)}else{var i=function(e,t){$(".wrapper").append("<span class='sampleTextDiv' style='font-size:"+t+";display:none'>"+e+"</span>");var i=new Object;return i.width=$(".sampleTextDiv").width(),i.height=$(".sampleTextDiv").height(),$(".sampleTextDiv").remove(),i}(b.label,b.fontSize),o=$(n).parent().height()/2-i.height/2;o+=globalResizeCalc(1),$(n).css({"padding-top":"0px",top:o+"px",height:"auto"}).val(e)}void 0===b.min&&void 0===b.max||C()},this.updateVal=function(e){for(var t in e)b[t]=e[t];void 0===e.value&&void 0===e.min&&void 0===e.max||C()};var i,f=b.visible;function x(e){e?($(h).unbind("click",w).bind("click",w),BrowserDetect.any()?($(h).unbind("touchstart",o).bind("touchstart",o),$(h).unbind("touchend",o).bind("touchend",o)):($(h).unbind("mousedown",o).bind("mousedown",o),$(h).unbind("mousemove",o).bind("mousemove",o),$(h).unbind("mouseout",o).bind("mouseout",o))):($(h).unbind("click",w),BrowserDetect.any()?($(h).unbind("touchstart",o),$(h).unbind("touchend",o)):($(h).unbind("mousedown",o),$(h).unbind("mousemove",o),$(h).unbind("mouseout",o)))}function v(){$(s).css({background:b.onFocusColor}),$(window).unbind("focusout",e).bind("focusout",e)}function e(){$(window).unbind("focusout",e),$(s).css({background:b.bgColor})}function w(e){var t=m.getValue();("focus"==e.type&&("normal"==b.type?$(n).text(t):$(n).val(t),b.onFocus&&b.onFocus({id:b.id})),"click"==e.type)&&(e.pageY>=$(this).offset().top&&e.pageY<=$(this).offset().top+$(this).height()/2?r.disabled||(t=Number(t)+b.incrDecrVarValue,m.setValue(t),y(e),b.textChange&&b.textChange({id:b.id,val:m.getValue()}),C()):l.disabled||(t=Number(t)-b.incrDecrVarValue,m.setValue(t),y(e),b.textChange&&b.textChange({id:b.id,val:m.getValue()}),C()));if("focusout"==e.type)y(e);else if("keypress"==e.type||"keydown"==e.type){var i=e.which;if(13==i)return audioPlayerObj.playAudio("confirm"),b.allowChangeOnEnterPress&&y(e),!1;if(""!=b.restrict&&-1==b.restrict.toLowerCase().indexOf(String.fromCharCode(i).toLowerCase())&&0!=i&&8!=i)return!1;var o=m.getValue().length;if(Math.abs(document.activeElement.selectionEnd-document.activeElement.selectionStart)<=0&&o>=b.maxlength&&0!=i&&8!=i)return!1;if(b.restrictAfterDecimal){var a=m.getValue().split(".")[1];if(a&&a.length>=b.afterDecimalLength)return!1}b.onKeyPress&&b.onKeyPress(e)}else"keyup"==e.type&&(t.length>b.maxlength&&m.setValue(t.split(t[b.maxlength-1])[0]),e.txtVal=t,b.keyupTxtField&&b.keyupTxtField(e))}function C(){if(b.showControls){var e=m.getValue();e>=b.max?(z("inc","disabled"),r.disabled=!0):(z("inc","normal"),r.disabled=!1),e<=b.min?(l.disabled=!0,z("dec","disabled")):(l.disabled=!1,z("dec","normal"))}}function o(e){"mousedown"!=e.type&&"touchstart"!=e.type||("touchstart"==e.type&&(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),(t=e.pageY>=$(this).offset().top&&e.pageY<=$(this).offset().top+$(this).height()/2?r:l).disabled||(audioPlayerObj.playAudio("down"),$(t).css({transform:"scale(0.9)","-ms-transform":"scale(0.9)","-webkit-transform":"scale(0.9)"})),BrowserDetect.any()||$(window).unbind("mouseup",o).bind("mouseup",o)),"mouseup"!=e.type&&"touchend"!=e.type||(t.disabled||audioPlayerObj.playAudio("up"),$(window).unbind("mouseup",o),$(r).css({transform:"scale(1)","-ms-transform":"scale(1)","-webkit-transform":"scale(1)"}),$(l).css({transform:"scale(1)","-ms-transform":"scale(1)","-webkit-transform":"scale(1)"})),"mousemove"==e.type&&((t=e.pageY>=$(this).offset().top&&e.pageY<=$(this).offset().top+$(this).height()/2?r:l).disabled?$(h).css("cursor","default"):$(h).css("cursor","pointer")),"mouseout"==e.type&&$(h).css("cursor","default")}function y(e){b.isNumber&&isNaN(m.getValue())&&m.setValue(0),b.autoValidate&&m.validate(),e.id=b.id,b.change&&b.change(e),C()}function z(e,t){"inc"==e?(r.width=r.width,r.getContext("2d").beginPath(),r.getContext("2d").fillStyle="normal"==t?"#666666":"#B3B3B3",r.getContext("2d").lineWidth=b.controlBtnLineWidth,r.getContext("2d").strokeStyle=b.buttonBg?b.buttonBg:"#ffffff",r.getContext("2d").moveTo(r.width/2,b.controlBtnLineWidth/2),r.getContext("2d").lineTo(r.width-b.controlBtnLineWidth/2,r.height-b.controlBtnLineWidth/2),r.getContext("2d").lineTo(b.controlBtnLineWidth/2,r.height-b.controlBtnLineWidth/2),r.getContext("2d").lineTo(r.width/2,b.controlBtnLineWidth/2),r.getContext("2d").fill(),r.getContext("2d").stroke(),r.getContext("2d").closePath()):"dec"==e&&(l.width=l.width,l.getContext("2d").beginPath(),l.getContext("2d").fillStyle="normal"==t?"#666666":"#B3B3B3",l.getContext("2d").lineWidth=b.controlBtnLineWidth,l.getContext("2d").strokeStyle=b.buttonBg?b.buttonBg:"#ffffff",l.getContext("2d").moveTo(l.width/2,l.height-b.controlBtnLineWidth/2),l.getContext("2d").lineTo(l.width-b.controlBtnLineWidth/2,b.controlBtnLineWidth/2),l.getContext("2d").lineTo(b.controlBtnLineWidth/2,b.controlBtnLineWidth/2),l.getContext("2d").lineTo(l.width/2,l.height-b.controlBtnLineWidth/2),l.getContext("2d").fill(),l.getContext("2d").stroke(),l.getContext("2d").closePath())}this.show=function(e){a&&(f=!0,b.target.show(),b.isShown&&b.isShown({show:!0,isFromSetter:e}))},this.hide=function(e){f=!1,b.target.hide(),b.isShown&&b.isShown({show:!1,isFromSetter:e})},this.enable=function(e){k&&(b.isEnable=!0,("normal"!=b.type||e)&&($(n).removeAttr("disabled").removeClass("inputDis"),b.target.css("opacity",1)),C(),b.showControls&&x(!0),b.isEnabled&&b.isEnabled({status:!0}))},this.disable=function(e){b.isEnable=!1,("normal"!=b.type||e)&&($(n).attr("disabled","true").addClass("inputDis"),b.target.css("opacity",.5)),b.showControls&&(l.disabled=!0,z("dec","disabled"),z("inc","disabled"),x(!(r.disabled=!0))),b.isEnabled&&b.isEnabled({status:!1})},this.getFocus=function(){$(n).focus()},this.changeTitle=function(e){e&&(b.title=e,$(n).attr("p_title",GCTConv(b.title)))},this.updateMaxMin=function(e,t){b.min=e,b.max=t,C()},this.getMaxMin=function(){return{min:b.min,max:b.max}},this.changeRSideline=function(e){$(p).css({background:e})},this.setCss=function(e){b.target.css(e)},this.setGetterAdditionalData=function(e){i=e},this.getGSvisible=function(){return a},this.setGSvisible=function(e){a=e},this.getGSenable=function(){return k},this.setGSenable=function(e){k=e};var a=!0,k=!0;this.getter=function(){if(""!=this.getValue())var e={value:isNaN(this.getValue())?this.getValue():1*this.getValue()};else if(" "==this.getValue())e={value:" "};else e={value:""};return null!=i&&(e.data=i),{caption:b.caption?b.caption:b.id,common:!0,componentname:"TextFieldComp",values:e,settable:b.setable,enabled:getterSetter.isFromInit?b.isEnable:k,visible:getterSetter.isFromInit?f:a}},this.setter=function(e){a!=e.visible&&((a=e.visible)?m.show(!0):m.hide(!0)),k!=e.enabled&&((k=e.enabled)?m.enable(!0):m.disable(!0)),getterSetter.isFromReset&&(k=a=!0),(e.values.value||0==e.values.value||getterSetter.isFromReset)&&(e.values.value||0==e.values.value)&&(this.setValue(e.values.value),w({type:"focusout"}),b.textChange&&b.textChange({id:b.id,val:m.getValue()}))},this.getCaption=function(){return b.caption},this.isSetable=function(){return b.setable}},ControlButton=function(){var t,o,a,n,s,r={id:"",orientation:"horizontal",x:0,y:0,control:"wh"};function l(e){"mousedown"==e.type&&$(window).unbind("mouseup",i).bind("mouseup",i),"mousedown"!=e.type&&"touchstart"!=e.type||(focusOutInput(),audioPlayerObj.playAudio("down"),t=$(this),$(this).removeClass("controlbtnComponentNormal"),e.preventDefault()),"click"!=e.type&&"touchend"!=e.type||(e.id=r.id,e.btnType=t.data("type"),r.click&&r.click(e),i(e))}function i(e){audioPlayerObj.playAudio("up"),$(".controlbtnComponent").addClass("controlbtnComponentNormal"),$(window).unbind("mouseup",i)}this.init=function(e){for(var t in e)r[t]=e[t];r.x=globalResizeCalc(r.x),r.y=globalResizeCalc(r.y);var i=document.createElement("div");r.target?r.target.append(i):$(gConfig.elContainer).append(i),r.target=$(i),0==r.visible&&r.target.css("display","none"),r.index&&r.target.css("z-index",r.index),r.target.css({position:"absolute",left:r.x+"px",top:r.y+"px","-ms-transform":"scale("+globalResizeCalc(1)+")","-webkit-transform":"scale("+globalResizeCalc(1)+")",transform:"scale("+globalResizeCalc(1)+")","transform-origin":"0 0","-webkit-transform-origin":"0 0","-ms-transform-origin":"0 0"}),o=document.createElement("div"),a=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div"),r.target.append(o).append(a).append(n).append(s),$(o).attr({class:"controlLegend controllegend_"+r.control}),$(a).attr({class:"controlbtnComponent controlbtnComponentInc controlbtnComponentNormal","data-type":"increase"}),$(n).attr({class:"controlbtnComponent controlbtnComponentRes controlbtnComponentNormal","data-type":"reset"}),$(s).attr({class:"controlbtnComponent controlbtnComponentDec controlbtnComponentNormal","data-type":"decrease"}),r.title&&(r.title.increase&&$(a).attr("p_title",GCTConv(r.title.increase)),r.title.reset&&$(n).attr("p_title",GCTConv(r.title.reset)),r.title.decrease&&$(s).attr("p_title",GCTConv(r.title.decrease))),BrowserDetect.any()?($(a).bind("touchstart",l).bind("touchend",l),$(n).bind("touchstart",l).bind("touchend",l),$(s).bind("touchstart",l).bind("touchend",l)):($(a).mousedown(l).click(l),$(n).mousedown(l).click(l),$(s).mousedown(l).click(l))},this.addEventListener=function(e,t){r[e]=t},this.show=function(){r.target.show()},this.hide=function(){r.target.hide()}},GraphControlButton=function(){var a,o,n,s,r,l,d,c,p,i,u={id:"",x:0,y:0,restrict:"",rotation:0,holderBG:"rgba(255,255,255,0)",subMenu:["x","y","xy"],setable:!0,zoomX:0,zoomY:0,maxZoomX:3,minZoomX:-3,maxZoomY:3,minZoomY:-3,visible:!0},g=this,h=-108,b="panxy",m=new Image;m.onload=function(){switch((a=document.createElement("canvas")).width=25,a.height=25,a.xPos=-108,a.name="subm",u.target.append(a),$(a).css({position:"absolute",right:"0px",bottom:"0px",width:globalResizeCalc(25)+"px",height:globalResizeCalc(25)+"px",background:"rgba(255,255,255,0.5)","box-shadow":"0px 0px 5px rgba(0,0,0,0.5)",cursor:"pointer"}),u.title&&u.title.subm?$(a).attr("p_title",GCTConv(u.title.subm)):$(a).attr("p_title",y("subm")),a.width=a.width,u.subMenu[u.subMenu.length-1]){case"xy":a.getContext("2d").drawImage(m,-108,0),b="panxy",h=f=-108;break;case"x":a.xPos=-143,a.getContext("2d").drawImage(m,-143,0),b="panx",h=f=-143;break;case"y":a.xPos=-179,a.getContext("2d").drawImage(m,-179,0),b="pany",h=f=-179}u.subMenuHide&&$(a).hide();var e=document.createElement("div");u.target.append(e),$(e).css({position:"absolute",right:"0px",bottom:globalResizeCalc(30)+"px",background:u.holderBG,"box-shadow":"0px 0px 5px rgba(0,0,0,0.5)"}),(n=document.createElement("canvas")).width=25,n.height=25,n.xPos=0,n.name="plus",$(e).append(n),$(n).css({width:globalResizeCalc(25)+"px",height:globalResizeCalc(25)+"px",background:"rgba(255,255,255,0.5)","margin-bottom":globalResizeCalc(-5)+"px",cursor:"pointer"}),n.getContext("2d").drawImage(m,0,0),u.title&&u.title.increase?$(n).attr("p_title",GCTConv(u.title.increase)):$(n).attr("p_title",y("increase")),(s=document.createElement("canvas")).width=25,s.height=25,s.xPos=-36,s.name="reset",$(e).append(s),$(s).css({width:globalResizeCalc(25)+"px",height:globalResizeCalc(25)+"px",background:"rgba(255,255,255,0.5)","margin-bottom":globalResizeCalc(-5)+"px",cursor:"pointer"}),s.getContext("2d").drawImage(m,-36,0),u.title&&u.title.reset?$(s).attr("p_title",GCTConv(u.title.reset)):$(s).attr("p_title",y("reset")),(r=document.createElement("canvas")).width=25,r.height=25,r.name="minus",$(e).append(r),$(r).css({width:globalResizeCalc(25)+"px",height:globalResizeCalc(25)+"px",background:"rgba(255,255,255,0.5)","margin-bottom":globalResizeCalc(-5)+"px",cursor:"pointer"}),90==u.rotation||270==u.rotation?(r.getContext("2d").drawImage(m,-257,0),r.xPos=-257):(r.getContext("2d").drawImage(m,-72,0),r.xPos=-72);u.title&&u.title.decrease?$(r).attr("p_title",GCTConv(u.title.decrease)):$(r).attr("p_title",y("decrease")),o=document.createElement("div"),u.target.append(o),$(o).css({position:"absolute",right:"0px",bottom:"0px",display:"none"});var t=document.createElement("div");$(o).append(t),$(t).css({position:"absolute",right:globalResizeCalc(40)+"px",bottom:"0px",width:u.subMenu.length*Math.round(globalResizeCalc(25))+"px",height:globalResizeCalc(25)+"px",background:"rgba(255,255,255,0.5)","box-shadow":"0px 0px 5px rgba(0,0,0,0.5)"}),-1!=u.subMenu.indexOf("x")&&((l=document.createElement("canvas")).width=25,l.height=25,l.xPos=-143,l.name="panx",$(l).css({width:Math.round(globalResizeCalc(25))+"px",height:Math.round(globalResizeCalc(25))+"px",background:"rgba(255,255,255,0.5)","margin-bottom":globalResizeCalc(-5)+"px",display:"inline-block",cursor:"pointer"}),u.title&&u.title.panx?$(l).attr("p_title",GCTConv(u.title.panx)):$(l).attr("p_title",y("panx")),l.getContext("2d").drawImage(m,-143,0));-1!=u.subMenu.indexOf("y")&&((d=document.createElement("canvas")).width=25,d.height=25,d.xPos=-179,d.name="pany",$(d).css({width:Math.round(globalResizeCalc(25))+"px",height:Math.round(globalResizeCalc(25))+"px",background:"rgba(255,255,255,0.5)","margin-bottom":globalResizeCalc(-5)+"px",display:"inline-block",cursor:"pointer"}),u.title&&u.title.pany?$(d).attr("p_title",GCTConv(u.title.pany)):$(d).attr("p_title",y("pany")),d.getContext("2d").drawImage(m,-179,0));-1!=u.subMenu.indexOf("xy")&&((c=document.createElement("canvas")).width=25,c.height=25,c.xPos=-108,c.name="panxy",$(c).css({width:Math.round(globalResizeCalc(25))+"px",height:Math.round(globalResizeCalc(25))+"px",background:"rgba(255,255,255,0.5)","margin-bottom":globalResizeCalc(-5)+"px",display:"inline-block",cursor:"pointer"}),u.title&&u.title.panxy?$(c).attr("p_title",GCTConv(u.title.panxy)):$(c).attr("p_title",y("panxy")),c.getContext("2d").drawImage(m,-108,0));for(var i=0;i<u.subMenu.length;i++)switch(u.subMenu[i]){case"x":$(t).append(l);break;case"y":$(t).append(d);break;case"xy":$(t).append(c)}(p=document.createElement("canvas")).width=12,p.height=25,$(o).append(p),$(p).css({position:"absolute",right:globalResizeCalc(25)+"px",bottom:"0px",width:globalResizeCalc(12)+"px",height:globalResizeCalc(25)+"px"}),p.getContext("2d").drawImage(m,-229,-2),BrowserDetect.any()?($(a).unbind("touchstart",v).bind("touchstart",v),$(n).unbind("touchstart",v).bind("touchstart",v),$(s).unbind("touchstart",v).bind("touchstart",v),$(r).unbind("touchstart",v).bind("touchstart",v),$(l).unbind("touchstart",v).bind("touchstart",v),$(d).unbind("touchstart",v).bind("touchstart",v),$(c).unbind("touchstart",v).bind("touchstart",v),$(a).unbind("touchend",v).bind("touchend",v),$(n).unbind("touchend",v).bind("touchend",v),$(s).unbind("touchend",v).bind("touchend",v),$(r).unbind("touchend",v).bind("touchend",v),$(l).unbind("touchend",v).bind("touchend",v),$(d).unbind("touchend",v).bind("touchend",v),$(c).unbind("touchend",v).bind("touchend",v)):($(a).unbind("mousedown",v).bind("mousedown",v),$(n).unbind("mousedown",v).bind("mousedown",v),$(s).unbind("mousedown",v).bind("mousedown",v),$(r).unbind("mousedown",v).bind("mousedown",v),$(l).unbind("mousedown",v).bind("mousedown",v),$(d).unbind("mousedown",v).bind("mousedown",v),$(c).unbind("mousedown",v).bind("mousedown",v),$(a).unbind("click",v).bind("click",v),$(n).unbind("click",v).bind("click",v),$(s).unbind("click",v).bind("click",v),$(r).unbind("click",v).bind("click",v),$(l).unbind("click",v).bind("click",v),$(d).unbind("click",v).bind("click",v),$(c).unbind("click",v).bind("click",v));switch(u.subMenu[u.subMenu.length-1]){case"x":w(l,!0);break;case"y":w(d,!0);break;case"xy":w(c,!0)}""!=u.restrict&&($(a).unbind("touchstart",v),$(a).unbind("touchend",v),$(a).unbind("mousedown",v),$(a).unbind("click",v),$(a).css({background:"none","box-shadow":"none",cursor:"default"}),"x"==u.restrict?(a.width=a.width,h=f=-143,a.getContext("2d").drawImage(m,-143,0)):"y"==u.restrict&&(a.width=a.width,h=f=-179,a.getContext("2d").drawImage(m,-179,0)),$(a).removeAttr("p_title"));R.status=!0},this.init=function(e){for(var t in e)u[t]=e[t];u.x=globalResizeCalc(u.x),u.y=globalResizeCalc(u.y);var i=document.createElement("div");u.target?u.target.append(i):$(gConfig.elContainer).append(i),u.target=$(i),0==u.visible&&u.target.css("display","none"),u.index&&u.target.css("z-index",u.index),u.target.css({position:"absolute",left:u.x+"px",top:u.y+"px",transform:"rotate("+u.rotation+"deg)","-webkit-transform":"rotate("+u.rotation+"deg)","-ms-transform":"rotate("+u.rotation+"deg)"}),b=u.restrict,m.src=gConfig.paths.comImg+"graphbuttons.png"},this.addEventListener=function(e,t){u[e]=t},this.getSelected=function(){return b};var t=u.visible;this.show=function(){z&&(t=!0,u.target.show())},this.hide=function(){t=!1,u.target.hide()},this.setDisabled=function(e){var t=BrowserDetect.any()?"touchstart":"mousedown";switch(e){case"increase":$(n).css({opacity:.5,cursor:"default"}),$(n).unbind(t,v).unbind("click",v);break;case"reset":$(s).css({opacity:.5,cursor:"default"}),$(s).unbind(t,v).unbind("click",v);break;case"decrease":$(r).css({opacity:.5,cursor:"default"}),$(r).unbind(t,v).unbind("click",v)}},this.setEnabled=function(e){if(k){var t=BrowserDetect.any()?"touchstart":"mousedown";switch(e){case"increase":$(n).css({opacity:1,cursor:"pointer"}),$(n).unbind(t,v).bind(t,v).unbind("click",v).bind("click",v);break;case"reset":$(s).css({opacity:1,cursor:"pointer"}),$(s).unbind(t,v).bind(t,v).unbind("click",v).bind("click",v);break;case"decrease":$(r).css({opacity:1,cursor:"pointer"}),$(r).unbind(t,v).bind(t,v).unbind("click",v).bind("click",v)}}};var f=-108;var x=!0;function v(e){if(x){if("mousedown"==e.type||"touchstart"==e.type?(focusOutInput(),audioPlayerObj.playAudio("down"),"mousedown"==e.type&&$(window).unbind("mouseup",v).bind("mouseup",v),w(i=this,!0)):"mouseup"!=e.type&&"touchend"!=e.type||(audioPlayerObj.playAudio("up"),"mouseup"==e.type&&$(window).unbind("mouseup",v),w(i,!1)),"click"==e.type||"touchend"==e.type){if(e.id=u.id,e.panType=b,"pseudo"==e.event)var t=""==e.name?"panxy":e.name;else t=this.name;switch(t){case"subm":C();break;case"panx":case"pany":case"panxy":b=t,-1!=u.subMenu.indexOf("x")&&w(l,!1),-1!=u.subMenu.indexOf("y")&&w(d,!1),-1!=u.subMenu.indexOf("xy")&&w(c,!1),"pseudo"==e.event?"panx"==t?w(l,!0):"pany"==t?w(d,!0):"panxy"==t&&w(c,!0):w(this,!0),"pseudo"==e.event?(a.xPos=e.drawX,h=e.drawX):(a.xPos=this.xPos,h=this.xPos,e.btnType="selectionchanged"),a.width=a.width,a.getContext("2d").drawImage(m,a.xPos,0),C(!1),e.panType=b,u.onevent&&u.onevent(e);break;case"plus":e.btnType="increase",u.onevent&&u.onevent(e);break;case"reset":e.btnType="reset",u.onevent&&u.onevent(e);break;case"minus":e.btnType="decrease",u.onevent&&u.onevent(e)}"panx"==b&&("plus"==t&&u.zoomX++,"reset"==t&&(u.zoomX=0),"minus"==t&&u.zoomX--),"pany"==b&&("plus"==t&&u.zoomY++,"reset"==t&&(u.zoomY=0),"minus"==t&&u.zoomY--),"panxy"==b&&("plus"==t&&(u.zoomY++,u.zoomX++),"reset"==t&&(u.zoomY=0,u.zoomX=0),"minus"==t&&(u.zoomY--,u.zoomX--)),u.zoomX>u.maxZoomX&&(u.zoomX=u.maxZoomX),u.zoomX<u.minZoomX&&(u.zoomX=u.minZoomX),u.zoomY>u.maxZoomY&&(u.zoomY=u.maxZoomY),u.zoomY<u.minZoomY&&(u.zoomY=u.minZoomY)}e.preventDefault()}}function w(e,t){e&&(e.width=e.width,t?(e.getContext("2d").drawImage(m,e.xPos,-41),$(e).css("background","#666666")):(e.getContext("2d").drawImage(m,e.xPos,0),$(e).css("background","rgba(255,255,255,0.5)")))}function C(e){void 0===e?$(o).toggle():e?$(o).show():$(o).hide()}function y(e){return GetGlobalTooltip("tooltip",e)}this.getGSvisible=function(){return z},this.setGSvisible=function(e){z=e},this.getGSenable=function(){return k},this.setGSenable=function(e){k=e};var z=!0,k=!0,R={status:!(this.getter=function(){var e=new Object;return e.caption=u.caption?u.caption:u.id,e.common=!0,e.componentname="GraphControlButton",e.values={},e.values.zoomX={value:u.zoomX},e.values.zoomY={value:u.zoomY},e.values.pan={value:b},e.values.drawX={value:h},e.settable=u.setable,e.enabled=k,e.visible=getterSetter.isFromInit?t:z,e})};this.setter=function(e){if(!R.status)return R.setterObj=e,void window.requestAnimationFrame(function(){g.setter(R.setterObj)});z!=e.visible&&((z=e.visible)?g.show():g.hide()),e.values&&(h=e.values.drawX?e.values.drawX.value:h,a.width=a.width,a.getContext("2d").drawImage(m,h,0)),k!=e.enabled&&((k=e.enabled)?(g.setEnabled("increase"),g.setEnabled("reset"),g.setEnabled("decrease"),$(a).css({opacity:1}),$(a).unbind("touchstart",v).bind("touchstart",v),$(a).unbind("touchend",v).bind("touchend",v),$(a).unbind("mousedown",v).bind("mousedown",v),$(a).unbind("click",v).bind("click",v)):(g.setDisabled("increase"),g.setDisabled("reset"),g.setDisabled("decrease"),$(a).css({opacity:.5}),$(a).unbind("touchstart",v),$(a).unbind("touchend",v),$(a).unbind("mousedown",v),$(a).unbind("click",v))),getterSetter.isFromReset&&(C(!(k=z=!0)),h=f,a.width=a.width,a.getContext("2d").drawImage(m,h,0));var t={id:u.id,type:"click",event:"pseudo",name:"pan"+u.subMenu[u.subMenu.length-1],drawX:h,preventDefault:function(){}};if(getterSetter.isFromReset)v(t),t.name="reset",v(t),u.zoomX=0,u.zoomY=0;else{if(t.drawX=e.values.drawX?e.values.drawX.value:h,"xy"!=u.restrict&&e.values.pan&&(t.name=e.values.pan.value,b!=t.name&&v(t)),("panx"==b||"panxy"==b)&&e.values.zoomX){e.values.zoomX.value>u.maxZoomX&&(e.values.zoomX.value=u.maxZoomX),e.values.zoomX.value<u.minZoomX&&(e.values.zoomX.value=u.minZoomX);var i=0;u.zoomX<e.values.zoomX.value&&(t.name="plus",i=e.values.zoomX.value-u.zoomX),u.zoomX>e.values.zoomX.value&&(t.name="minus",i=u.zoomX-e.values.zoomX.value);for(var o=0;o<i;o++)v(t)}if(("pany"==b||"panxy"==b)&&e.values.zoomY){e.values.zoomY.value>u.maxZoomY&&(e.values.zoomY.value=u.maxZoomY),e.values.zoomY.value<u.minZoomY&&(e.values.zoomY.value=u.minZoomY);i=0;u.zoomY<e.values.zoomY.value&&(t.name="plus",i=e.values.zoomY.value-u.zoomY),u.zoomY>e.values.zoomY.value&&(t.name="minus",i=u.zoomY-e.values.zoomY.value);for(o=0;o<i;o++)v(t)}u.zoomX=e.values.zoomX.value,u.zoomY=e.values.zoomY.value}},this.getCaption=function(){return u.caption},this.isSetable=function(){return u.setable}},ButtonComp=function(){var s,r,l={id:"",x:0,y:0,width:192,height:46,fontSize:"1em",orientation:"horizontal",border:!1,bgColor:"#F2F2F2",label:"LABEL",visibility:!0,selected:!1,paddingTop:0,setable:!1,isEnable:!1,bgColorDown:"#666666"},d=this,t=!1;this.init=function(e){for(var t in e)l[t]=e[t];l.x=Math.round(globalResizeCalc(l.x)),l.y=Math.round(globalResizeCalc(l.y)),l.width=Math.round(globalResizeCalc(l.width)),l.height=Math.round(globalResizeCalc(l.height)),l.paddingTop=Math.round(globalResizeCalc(l.paddingTop));var i=document.createElement("div");l.target?l.target.append(i):$(gConfig.elContainer).append(i),l.target=$(i),0==l.visible&&l.target.css("display","none"),l.index&&l.target.css("z-index",l.index),l.target.css({position:"absolute",left:l.x+"px",top:l.y+"px",width:l.width+"px",height:l.height+"px","text-align":"center",cursor:"pointer"}),l.target.attr("p_title",l.title?GCTConv(l.title):GetGlobalTooltip("tooltip","genricClick"));var o=l.width,a=l.height;s=document.createElement("div"),l.target.append(s),$(s).css({width:o,height:a,position:"absolute",overflow:"hidden"}),r=document.createElement("div"),$(s).append(r),$(r).css({width:o,height:a,display:"table-cell","font-size":l.fontSize,"padding-top":l.paddingTop+"px","font-weight":"bold","vertical-align":"middle",color:"#333333"}).html(l.label),l.srcUp?($(r).css({background:"url("+gizmoImageObj[l.srcUp].src+") no-repeat"}),$(r).css({"background-size":o+"px "+a+"px"})):l.target.css({background:l.bgColor}),l.title&&$(r).attr("p_title",l.title?GCTConv(l.title):GetGlobalTooltip("tooltip","genricClick"));var n=globalResizeCalc(2)<2?2:globalResizeCalc(2);d.enable(),l.border?l.target.css("box-shadow","0px 0px 0px "+globalResizeCalc(3)+"px rgba(255, 255, 255, 0.6) , 0px 0px 0px "+globalResizeCalc(8)+"px rgba(0,0,0,0.2), "+n+"px "+n+"px 0px 0px #000000, -"+n+"px -"+n+"px 0px 0px #FFFFFF"):l.srcUp||l.target.css("box-shadow",n+"px "+n+"px 0px 0px #000000, -"+n+"px -"+n+"px 0px 0px #FFFFFF"),p(!1)},this.addEventListener=function(e,t){l[e]=t},this.setStyle=function(e){l.target.css(e)},this.setState=function(e){e?d.enable():d.disable()};var i=!(this.showBtn=function(e){e?d.show():d.hide()});this.setSelected=function(e){p(i=e)};var o=!0;function e(e){$(r).css("color",l.highLightColor)}function a(e){$(r).css("color","#333333")}function n(e){globalResizeCalc(1)<1||globalResizeCalc(1);"mousedown"==e.type&&$(window).off("mouseup mouseleave",c).on("mouseup mouseleave",c),"mousedown"!=e.type&&"touchstart"!=e.type||(t=!0,focusOutInput(),audioPlayerObj.playAudio("down"),btnName=$(this),e.id=l.id,e.btnType=btnName.data("type"),l.mousedown&&l.mousedown(e),p(!0),BrowserDetect.any()&&e.preventDefault()),"click"!=e.type&&"touchend"!=e.type||(audioPlayerObj.playAudio("up"),e.id=l.id,"undefined"!=typeof btnName&&(e.btnType=btnName.data("type")),"pseudo"==e.event?(p(!0),l.mousedown&&l.mousedown(e),l.click&&l.click(e),c(e)):t&&(l.click&&l.click(e),c(e)),t=!1)}function c(e){"mouseleave"==e.type&&(t&&(audioPlayerObj.playAudio("up"),e.id=l.id,e.btnType=btnName.data("type"),l.click&&l.click(e)),t=!1),l.selected||p(!1),$(window).off("mouseup mouseleave",c)}function p(e){var t=globalResizeCalc(1)<1?1:globalResizeCalc(1);e?l.srcDown?($(r).css({background:"url("+gizmoImageObj[l.srcDown].src+") no-repeat"}),$(r).css({"background-size":l.width+"px "+l.height+"px"})):($(r).css({background:l.bgColorDown,color:"#FFFFFF"}),l.border?l.target.css("box-shadow","0px 0px 0px "+globalResizeCalc(3)+"px rgba(255, 255, 255, 0.6) , 0px 0px 0px "+globalResizeCalc(8)+"px rgba(0,0,0,0.2), "+t+"px "+t+"px 0px 0px #545454, -"+t+"px -"+t+"px 0px 0px #545454"):l.srcDown||l.target.css("box-shadow",t+"px "+t+"px 0px 0px #545454, -"+t+"px -"+t+"px 0px 0px #545454")):(l.srcUp?($(r).css({background:"url("+gizmoImageObj[l.srcUp].src+") no-repeat"}),$(r).css({"background-size":l.width+"px "+l.height+"px"})):$(r).css({background:l.bgColor,color:"#333333"}),l.border?l.target.css("box-shadow","0px 0px 0px "+globalResizeCalc(3)+"px rgba(255, 255, 255, 0.6) , 0px 0px 0px "+globalResizeCalc(8)+"px rgba(0,0,0,0.2), "+t+"px "+t+"px 0px "+t+"px #999999, -"+t+"px -"+t+"px 0px "+t+"px #FFFFFF"):l.srcUp||l.target.css("box-shadow",t+"px "+t+"px 0px "+t+"px #999999, -"+t+"px -"+t+"px 0px "+t+"px #FFFFFF"))}this.show=function(e){u&&(o=!0,l.target.show(),l.isShown&&l.isShown({show:!0,isFromSetter:e}))},this.setLabel=function(e){l.label=e,$(r).html(l.label)},this.hide=function(e){o=!1,l.target.hide(),l.isShown&&l.isShown({show:!1,isFromSetter:e})},this.enable=function(){g&&(l.isEnable=!0,BrowserDetect.any()?l.target.off("touchstart",n).off("touchend",n).on("touchstart",n).on("touchend",n):(l.target.off("mousedown",n).off("click",n).on("mousedown",n).on("click",n),l.highLightColor&&l.target.off("mouseover",e).off("mouseout",a).on("mouseover",e).on("mouseout",a)),l.target.css({opacity:1,cursor:"pointer"}),l.isEnabled&&l.isEnabled({enable:!0}))},this.disable=function(){l.isEnable=!1,BrowserDetect.any()?l.target.off("touchstart",n).off("touchend",n):(l.target.off("mousedown",n).off("click",n),l.highLightColor&&l.target.off("mouseover",e).off("mouseout",a)),l.target.css({opacity:.5,cursor:"default"}),l.highLightColor&&$(r).css("color","#333333"),l.isEnabled&&l.isEnabled({enable:!1})},this.updateTop=function(e){l.target.css({top:e})},this.updateIndex=function(e){l.target.css({"z-index":e})},this.setOpacity=function(e){l.target.css({opacity:e})},this.isBtnEnabled=function(){return l.isEnable},this.getGSvisible=function(){return u},this.setGSvisible=function(e){u=e},this.getGSenable=function(){return g},this.setGSenable=function(e){g=e},this.updateGSE=function(e){this.setGSenable(e)};var u=!0,g=!0;this.getter=function(){var e=new Object;return e.caption=l.caption?l.caption:l.id,e.common=!0,e.componentname="ButtonComp",e.values={},e.values.click=i,e.settable=l.setable,e.enabled=getterSetter.isFromInit?l.isEnable:g,e.visible=getterSetter.isFromInit?o:u,e},this.setter=function(e){u!=e.visible&&((u=e.visible)?d.show(!0):d.hide(!0)),g!=e.enabled&&((g=e.enabled)?d.enable():d.disable()),getterSetter.isFromReset&&(g=u=!0),l.isEnable&&e.values.click&&n({id:l.id,type:"click",event:"pseudo"})},this.getCaption=function(){return l.caption},this.isSetable=function(){return l.setable}},ToolComp=function l(){var t,i,o,r,d,a,c,p,u,n,g,h,b,m={id:"",top:!0,left:!0,subMenuList:["camera","arrow","help","sound"],is3d:!1,setable:!0,name:"Tools",caption:"ToolPallet"},f=this,s=globalResizeCalc(7),x=[[-20,-316],[-133,-316],[-203,-316],[-266,-316],[-336,-316]],v=1,w=!1,C=!0,y=parseInt($(".wrapper").css("height"))-globalResizeCalc(36),z=new Image;z.onload=function(){t=document.createElement("div"),m.target.append(t),$(t).css({position:"absolute",left:"0px",width:"100%","text-align":"left",cursor:"pointer"}),BrowserDetect.any()?($(t).unbind("touchstart",L).bind("touchstart",L),$(t).unbind("touchend",L).bind("touchend",L)):$(t).unbind("mousedown",L).bind("mousedown",L);$(t).bind("click",function(e){L(e,"toolHead")}),c=document.createElement("canvas"),$(t).append(c),c.width=52,c.height=52,$(c).css({position:"absolute",width:globalResizeCalc(52)+"px",height:globalResizeCalc(52)+"px"}),c.getContext("2d").drawImage(z,x[0][0],x[0][1]),n=document.createElement("div"),m.target.append(n),$(n).css({margin:m.top?"40px 0px 60px 0px":"60px 0px 40px 0px"}),(o=document.createElement("canvas")).width=48,o.height=36,$(o).css({width:globalResizeCalc(47)+"px",height:globalResizeCalc(36)+"px",display:"inline-block",cursor:"pointer"}),o.getContext("2d").drawImage(z,-22,0),BrowserDetect.any()?($(o).unbind("touchstart",L).bind("touchstart",G),$(o).unbind("touchend",L).bind("touchend",G)):$(o).unbind("mouseup",L).bind("mouseup",G);$(o).bind("click",function(e){L(e,"camera")}),(r=document.createElement("canvas")).width=57,r.height=40,$(r).css({width:globalResizeCalc(57)+"px",height:globalResizeCalc(40)+"px",display:"inline-block"}).addClass("commongrab").attr("data-makeduplicate","true"),BrowserDetect.any()?($(r).unbind("touchstart",P).bind("touchstart",P),$(r).unbind("touchmove",P).bind("touchmove",P),$(r).unbind("touchend",P).bind("touchend",P)):BrowserDetect.ChromeBook()||BrowserDetect.WindowsTouch()?($(r).unbind("touchstart mousedown",P).bind("touchstart mousedown",P),$(r).unbind("touchmove",P).bind("touchmove",P),$(r).unbind("touchend",P).bind("touchend",P)):$(r).unbind("mousedown",P).bind("mousedown",P);(d=document.createElement("canvas")).width=45,d.height=40,$(d).css({width:globalResizeCalc(45)+"px",height:globalResizeCalc(40)+"px",display:"inline-block",cursor:"pointer"}),d.getContext("2d").drawImage(z,-22,-155),BrowserDetect.any()?($(d).unbind("touchstart",L).bind("touchstart",L),$(d).unbind("touchend",L).bind("touchend",L)):$(d).unbind("mousedown",L).bind("mousedown",L);$(d).bind("click",function(e){L(e,"help")}),BrowserDetect.any()?($(d).unbind("touchstart",A).bind("touchstart",A),$(d).unbind("touchmove",A).bind("touchmove",A),$(d).unbind("touchend",A).bind("touchend",A)):BrowserDetect.ChromeBook()||BrowserDetect.WindowsTouch()?($(d).unbind("touchstart mousedown",A).bind("touchstart mousedown",A),$(d).unbind("touchmove",A).bind("touchmove",A),$(d).unbind("touchend",A).bind("touchend",A)):$(d).unbind("mousedown",A).bind("mousedown",A);(a=document.createElement("canvas")).width=49,a.height=39,$(a).css({width:globalResizeCalc(49)+"px",height:globalResizeCalc(39)+"px",display:"inline-block",cursor:"pointer"}),a.getContext("2d").drawImage(z,-22,-239),BrowserDetect.any()?($(a).unbind("touchstart",L).bind("touchstart",L),$(a).unbind("touchend",L).bind("touchend",L)):$(a).unbind("mousedown",L).bind("mousedown",L);$(a).bind("click",function(e){L(e,"sound")}),function(){for(var e=0;e<m.subMenuList.length;e++){var t,i;switch(m.subMenuList[e].toLowerCase()){case"camera":t=o,i="<br>Screen shot<br>";break;case"arrows":case"arrow":t=r,i="<br>Arrows<br>";break;case"help":t=d,i="<br>Help<br>";break;case"sound":t=a,i="<br>Sound<br>"}0!=Number(e)&&$(t).css("margin-top",globalResizeCalc(25)),$(n).append(t),$(n).append(i)}}(),helpIcon=document.createElement("div"),$(gConfig.elContainer).append(helpIcon),$(helpIcon).css({position:"absolute",display:"none","z-index":101}).attr("id","helpIcon"),helpTextDiv=document.createElement("div"),$(helpIcon).append(helpTextDiv),$(helpTextDiv).css({position:"absolute",top:"0px",left:"0px","min-width":"70px","text-align":"center"}).attr("id","helpTextDiv"),p=document.createElement("canvas"),$(helpIcon).append(p),$(p).css({position:"absolute"}).attr("id","helpImg"),u=document.createElement("div"),$(helpTextDiv).append(u),$(u).css({position:"relative",padding:globalResizeCalc(10)+"px "+globalResizeCalc(20)+"px","font-size":"0.6em","font-weight":"bold",color:"#000000","white-space":"nowrap","z-index":1}).attr("id","onlyText_"+m.id);var e=Math.round(globalResizeCalc(15));m.left?((i=document.createElement("canvas")).width=16,i.height=12,$(t).append('<div style="display: inline-block; margin-left: '+globalResizeCalc(61)+'px;">Tools</div>'),$(t).append(i),$(i).css({display:"inline-block",width:globalResizeCalc(16)+"px",height:globalResizeCalc(12)+"px","margin-left":globalResizeCalc(10)+"px"}),m.top?(r.getContext("2d").drawImage(z,-197,-74),v=4,m.target.css({bottom:y+"px",left:"0px","box-shadow":"2px 2px 4px rgba(0,0,0,0.5)","border-right":s+"px solid #EBEBEB","border-bottom":s+"px solid #EBEBEB","border-bottom-right-radius":e+"px"}),$(t).css({bottom:globalResizeCalc(5)+"px"}),$(c).css({left:globalResizeCalc(3)+"px",bottom:globalResizeCalc(-25)+"px"}),i.getContext("2d").drawImage(z,-48,-383)):(r.getContext("2d").drawImage(z,-77,-74),v=2,m.target.css({top:y+"px",left:"0px","box-shadow":"2px -2px 4px rgba(0,0,0,0.5)","border-right":s+"px solid #EBEBEB","border-top":s+"px solid #EBEBEB","border-top-right-radius":e+"px"}),$(t).css({top:"5px"}),$(c).css({left:globalResizeCalc(3)+"px",top:globalResizeCalc(-32)+"px"}),i.getContext("2d").drawImage(z,-18,-383))):((i=document.createElement("canvas")).width=16,i.height=12,$(t).append(i),$(t).append('<div style="display: inline-block; margin-left: '+globalResizeCalc(10)+'px;">Tools</div>'),$(i).css({display:"inline-block",width:globalResizeCalc(16)+"px",height:globalResizeCalc(12)+"px","margin-left":globalResizeCalc(10)+"px"}),m.top?(r.getContext("2d").drawImage(z,-135,-74),v=3,m.target.css({bottom:y+"px",right:"0px","box-shadow":"-2px 2px 4px rgba(0,0,0,0.5)","border-left":s+"px solid #EBEBEB","border-bottom":s+"px solid #EBEBEB","border-bottom-left-radius":e+"px"}),$(t).css({bottom:globalResizeCalc(5)+"px"}),$(c).css({right:globalResizeCalc(3)+"px",bottom:globalResizeCalc(-25)+"px"}),i.getContext("2d").drawImage(z,-48,-383)):(r.getContext("2d").drawImage(z,-15,-74),v=1,m.target.css({top:y+"px",right:"0px","box-shadow":"-2px -2px 4px rgba(0,0,0,0.5)","border-left":s+"px solid #EBEBEB","border-top":s+"px solid #EBEBEB","border-top-left-radius":e+"px"}),$(t).css({top:"5px"}),$(c).css({right:globalResizeCalc(3)+"px",top:globalResizeCalc(-32)+"px"}),i.getContext("2d").drawImage(z,-18,-383)));W.status=!0};var k,R,T,S,E,F=new Array,B=[{x:-286,y:-3},{x:-286,y:-72},{x:-286,y:-142},{x:-286,y:-211}],D=0;this.init=function(e){for(var t in e)m[t]=e[t];var i=document.createElement("div");m.target?m.target.append(i):$(gConfig.elContainer).append(i),m.target=$(i),0==m.visible&&m.target.css("display","none"),m.index&&m.target.css("z-index",m.index),m.title&&m.target.attr("p_title",GCTConv(m.title)),m.target.css({position:"fixed",width:globalResizeCalc(140)+"px",background:"#666666","text-align":"center",color:"#FFFFFF","font-size":"0.9em","z-index":100}).attr("id","toolTipConatiner"),z.src=gConfig.paths.comImg+"tools.png",(b=new MsgBoxComp).init(),$(document).on("commonCameraRenderDone",function(e){f.show()})},this.openClose=function(e,t){i.width=i.width,e?(m.top?m.target.animate({bottom:parseInt($(".wrapper").css("height"))-m.target.outerHeight()},200,function(){t&&t()}):m.target.animate({top:parseInt($(".wrapper").css("height"))-m.target.outerHeight()},200,function(){t&&t()}),m.top?i.getContext("2d").drawImage(z,-18,-383):i.getContext("2d").drawImage(z,-48,-383),BrowserDetect.any()?$(document).unbind("touchstart",X).bind("touchstart",X):BrowserDetect.ChromeBook()||BrowserDetect.WindowsTouch()?$(document).unbind("touchstart mousedown",X).bind("touchstart mousedown",X):$(document).unbind("mousedown",X).bind("mousedown",X)):(m.top?m.target.animate({bottom:y},200,function(){t&&t()}):m.target.animate({top:y},200,function(){t&&t()}),m.top?i.getContext("2d").drawImage(z,-48,-383):i.getContext("2d").drawImage(z,-18,-383),$(document).unbind("mousedown",X),$(document).unbind("touchstart",X)),w=e},this.addEventListener=function(e,t){m[e]=t};var I=m.visible;function G(e){"mouseup"!=e.type&&"touchend"!=e.type||BrowserDetect.ie9()||audioPlayerObj.playAudio("camera")}this.show=function(){Y&&(I=!0,m.target.show())},this.hide=function(){I=!1,m.target.hide()};var M=!0;function L(e,t){if(M)if("mousedown"==e.type||"touchstart"==e.type)focusOutInput(),audioPlayerObj.playAudio("down"),"mousedown"==e.type&&$(window).unbind("mouseup",L).bind("mouseup",L);else if("click"==e.type)switch($.event.trigger({type:"ToolBoxClicked",toolBtn:t}),t){case"toolHead":w?f.openClose(!1):f.openClose(!0);break;case"sound":a.width=a.width,C?a.getContext("2d").drawImage(z,-133,-239):a.getContext("2d").drawImage(z,-22,-239),C=!C,m.soundToggleEvnt&&m.soundToggleEvnt({isEnable:C}),audioPlayerObj.enable(C),audioPlayerObj.playAudio("up");break;case"arrows":$(".pointerBox").css("right","0px"),$(".toolLogo").css({"background-position":"-1px -419px"});break;case"camera":m.is3d&&m.onCameraClick3d&&m.onCameraClick3d(),f.openClose(!1,function(){exportToApiObj.exportImage()});break;case"help":break;default:e.instance=t,m.click&&m.click(e)}else"mouseup"!=e.type&&"touchend"!=e.type||(audioPlayerObj.playAudio("up"),"mouseup"==e.type&&$(window).unbind("mouseup",L))}function A(e){if("touchstart"!=e.type&&"touchmove"!=e.type||(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),"mousedown"==e.type||"touchstart"==e.type)g=!(l.ISACTIVE=!0),h={x:e.pageX,y:e.pageY},$(window).unbind("mousemove",A).bind("mousemove",A),$(window).unbind("mouseup",A).bind("mouseup",A);else if("mousemove"==e.type||"touchmove"==e.type){if(g||h.x==e.pageX&&h.y==e.pageY||(f.openClose(!1),g=!0),g){$(helpIcon).css("opacity",1).show();var t=document.elementFromPoint(e.pageX,e.pageY);$.event.trigger({type:"commonToolTipActiveAndMoving",pageX:e.pageX,pageY:e.pageY});var i=$(t).attr("p_title");i||($(t).is("i")||$(t).is("b")||$(t).is("p"))&&(i=$(t).parent().attr("p_title")),i?($(u).html(i),$(u).children(".localMJ_i").css("font-size","1.15em")):$(u).html("<b>?</b>"),$(helpTextDiv).css("left",$(helpTextDiv).outerWidth(!0)/2*-1+"px");var o=globalResizeCalc(10);p.width=$(helpTextDiv).outerWidth(!0),p.height=$(helpTextDiv).outerHeight(!0)+o,$(p).css({width:p.width,height:p.height});var a=p.width-globalResizeCalc(2),n=(p.height,globalResizeCalc(2),globalResizeCalc(5)),s=globalResizeCalc(1),r=p.getContext("2d");r.beginPath(),r.fillStyle="#9BD1FF",r.strokeStyle="#23537E",r.lineWidth=globalResizeCalc(2),e.pageY<=70||e.pageX-$(helpTextDiv).outerWidth(!0)/2<5||e.pageX+$(helpTextDiv).outerWidth(!0)/2+5>globalResizeCalc(1024)?e.pageX<=parseFloat($(".wrapper").css("width"))/2?($(helpIcon).css({left:e.pageX+$(helpTextDiv).outerWidth(!0)/2+globalResizeCalc(60)+"px",top:e.pageY-globalResizeCalc(15)+"px"}),$(p).css({left:$(helpTextDiv).css("left"),top:"0px"}),r.moveTo(n+o,s),r.lineTo(a-n-o,s),r.quadraticCurveTo(a-o,s,a-o,n),r.lineTo(a-o,$(helpTextDiv).outerHeight(!0)-n),r.quadraticCurveTo(a-o,$(helpTextDiv).outerHeight(!0),a-n-o,$(helpTextDiv).outerHeight(!0)),r.lineTo(n+o,$(helpTextDiv).outerHeight(!0)),r.quadraticCurveTo(s+o,$(helpTextDiv).outerHeight(!0),s+o,$(helpTextDiv).outerHeight(!0)-n),r.lineTo(s+o,$(helpTextDiv).outerHeight(!0)/2+globalResizeCalc(5)),r.lineTo(s,$(helpTextDiv).outerHeight(!0)/2),r.lineTo(s+o,$(helpTextDiv).outerHeight(!0)/2-globalResizeCalc(5))):($(helpIcon).css({left:e.pageX-$(helpTextDiv).outerWidth(!0)/2-globalResizeCalc(60)+"px",top:e.pageY-globalResizeCalc(15)+"px"}),$(p).css({left:$(helpTextDiv).css("left"),top:"0px"}),r.moveTo(n+o,s),r.lineTo(a-n-o,s),r.quadraticCurveTo(a-o,s,a-o,n),r.lineTo(a-o,$(helpTextDiv).outerHeight(!0)/2-globalResizeCalc(5)),r.lineTo(a,$(helpTextDiv).outerHeight(!0)/2),r.lineTo(a-o,$(helpTextDiv).outerHeight(!0)/2+globalResizeCalc(5)),r.lineTo(a-o,$(helpTextDiv).outerHeight(!0)-n),r.quadraticCurveTo(a-o,$(helpTextDiv).outerHeight(!0),a-n-o,$(helpTextDiv).outerHeight(!0)),r.lineTo(n+o,$(helpTextDiv).outerHeight(!0)),r.quadraticCurveTo(s+o,$(helpTextDiv).outerHeight(!0),s+o,$(helpTextDiv).outerHeight(!0)-n)):($(helpIcon).css({left:e.pageX+"px",top:e.pageY+globalResizeCalc(-60)+"px"}),$(p).css({left:$(helpTextDiv).css("left"),top:"0px"}),r.moveTo(n+o,s),r.lineTo(a-n-o,s),r.quadraticCurveTo(a-o,s,a-o,n),r.lineTo(a-o,$(helpTextDiv).outerHeight(!0)-n),r.quadraticCurveTo(a-o,$(helpTextDiv).outerHeight(!0),a-n-o,$(helpTextDiv).outerHeight(!0)),r.lineTo(a/2+globalResizeCalc(5),$(helpTextDiv).outerHeight(!0)),r.lineTo(a/2,p.height-globalResizeCalc(2)),r.lineTo(a/2-globalResizeCalc(5),$(helpTextDiv).outerHeight(!0)),r.lineTo(n+o,$(helpTextDiv).outerHeight(!0)),r.quadraticCurveTo(s+o,$(helpTextDiv).outerHeight(!0),s+o,$(helpTextDiv).outerHeight(!0)-n)),r.lineTo(s+o,n),r.quadraticCurveTo(s+o,s,n+o,s),r.fill(),r.stroke()}}else"mouseup"!=e.type&&"touchend"!=e.type||(l.ISACTIVE=!1,$(window).unbind("mousemove",A),$(window).unbind("mouseup",A),g||b.showMsg(GetGlobalTooltip("alert","help")),$(helpIcon).animate({left:$(d).offset().left-globalResizeCalc(5),top:$(d).offset().top-globalResizeCalc(20),opacity:0},500,function(){$(this).hide()}));e.preventDefault()}var _=0;function P(e){if("touchstart"!=e.type&&"touchmove"!=e.type||(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),"mousedown"==e.type||"touchstart"==e.type)S=!(l.ISACTIVE=!0),E={x:e.pageX,y:e.pageY},k="pseudo"==e.event?r:this,$(window).unbind("mousemove",P).bind("mousemove",P),$(window).unbind("mouseup",P).bind("mouseup",P),T={x:e.pageX,y:e.pageY},audioPlayerObj.playAudio("down"),$(k).addClass("commongrabbing");else if("mousemove"==e.type||"touchmove"==e.type){if((S||E.x==e.pageX&&E.y==e.pageY)&&"pseudo"!=e.event||(c.width=c.width,c.getContext("2d").drawImage(z,x[v][0],x[v][1]),"true"!=$(k).attr("data-makeduplicate")&&"pseudo"!=e.event||(f.openClose(!1),k=document.createElement("canvas"),$(".wrapper").append(k),k.width=110,k.height=40,$(k).css({position:"absolute",left:"-100px",top:"-100px",width:globalResizeCalc(110)+"px",height:globalResizeCalc(40)+"px","z-index":100}).addClass("commongrab toolArrows").attr("p_title",GetGlobalTooltip("tooltip","arrow")),null==$(k).attr("Number")&&($(k).attr("Number",_).attr("id",_),_+=1),"pseudo"==e.event&&(D=e.color),$(k).attr("color",D),k.getContext("2d").drawImage(z,B[D].x,B[D].y),3<++D&&(D=0),F.push(k),BrowserDetect.any()?($(k).unbind("touchstart",P).bind("touchstart",P),$(k).unbind("touchmove",P).bind("touchmove",P),$(k).unbind("touchend",P).bind("touchend",P)):BrowserDetect.ChromeBook()||BrowserDetect.WindowsTouch()?($(k).unbind("touchstart mousedown",P).bind("touchstart mousedown",P),$(k).unbind("touchmove",P).bind("touchmove",P),$(k).unbind("touchend",P).bind("touchend",P)):($(k).unbind("mousedown",P).bind("mousedown",P),$(k).unbind("dblclick",P).bind("dblclick",P))),S=!0),S){if(BrowserDetect.any()&&(e.pageY-=35),!R||5<Math.abs(e.pageX-R.x)||5<Math.abs(e.pageY-R.y)||"pseudo"==e.event){if("pseudo"==e.event&&((R={}).x=e.pageX,R.y=e.pageY),R){var t=e.pageX-R.x,i=e.pageY-R.y;180*Math.atan2(i,t)/Math.PI;var o=Math.atan((e.pageY-R.y)/(e.pageX-R.x))*(180/Math.PI),a=10*Math.round(o/10),n=0;e.pageX==R.x&&e.pageY>R.y?n=90:e.pageX>R.x?n=a:e.pageX<R.x?n=a+180:e.pageX==R.x&&e.pageY<R.y&&(n=270),"pseudo"==e.event&&(n=e.angle),$(k).css({left:e.pageX-55+"px",top:e.pageY-20+"px",transform:"rotate("+n+"deg)","-webkit-transform":"rotate("+n+"deg)","-moz-transform":"rotate("+n+"deg)","-ms-transform":"rotate("+n+"deg)"}),$(k).addClass("commongrabbing"),$(k).attr("x",e.pageX),BrowserDetect.any()?$(k).attr("y",e.pageY+35):$(k).attr("y",e.pageY),$(k).attr("angle",n)}R={x:e.pageX,y:e.pageY},isAct=!0}T={x:e.pageX,y:e.pageY}}}else if("mouseup"==e.type||"touchend"==e.type){l.ISACTIVE=!1,addPointerGrabbing(!1),e.pageX=T.x,e.pageY=T.y,c.width=c.width,c.getContext("2d").drawImage(z,x[0][0],x[0][1]);var s=!0;S||"true"!=$(k).attr("data-makeduplicate")||(s=!1,b.showMsg(GetGlobalTooltip("alert","arrow"))),s&&(e.pageX>=$(c).offset().left&&e.pageX<=$(c).offset().left+$(c).width()&&e.pageY>=$(c).offset().top&&e.pageY<=$(c).offset().top+$(c).height()||e.pageX>=$(m.target).offset().left&&e.pageX<=$(m.target).offset().left+$(m.target).width()&&e.pageY>=$(m.target).offset().top&&e.pageY<=$(m.target).offset().top+$(m.target).height())&&($(k).remove(),_=--_<0?0:_),audioPlayerObj.playAudio("up"),$(window).unbind("mousemove",P),$(window).unbind("mouseup",P)}else"dblclick"==e.type&&($(k).remove(),_=--_<0?0:_);e.preventDefault()}function X(e){"touchstart"==e.type&&(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),(e.pageX<m.target.offset().left||e.pageX>m.target.offset().left+m.target.outerWidth(!0)||e.pageY<m.target.offset().top||e.pageY>m.target.offset().top+m.target.outerHeight(!0))&&f.openClose(!1)}this.triggerClick=function(){return!1};var Y=!0,H=!0,W={status:!(this.getter=function(){var e=new Object;e.caption=m.caption?m.caption:m.id,e.common=!0,e.componentname="ToolComp",e.values={},e.values.open=w,e.values.sound=C,e.values.camera=!1,e.values.arrows=[];for(var t=$(".toolArrows"),i=0;i<t.length;i++)e.values.arrows.push({key:"Arrow_"+$(t[i]).attr("color"),x:1*$(t[i]).attr("x"),y:1*$(t[i]).attr("y"),angle:1*$(t[i]).attr("angle")});return e.settable=m.setable,e.enabled=getterSetter.isFromInit?M:H,e.visible=getterSetter.isFromInit?I:Y,e})};this.setter=function(e){if(!W.status)return W.setterObj=e,void window.requestAnimationFrame(function(){f.setter(W.setterObj)});if(Y!=e.visible&&((Y=e.visible)?f.show():f.hide()),m.target.css({opacity:1}),H!=e.enabled){if(!(H=e.enabled))return M=!1,void m.target.css({opacity:.5});M=!0}for(var t in getterSetter.isFromReset&&(H=Y=!0,f.show()),e.values)switch(t){case"open":f.openClose(e.values.open);break;case"camera":e.values.camera&&L({type:"click"},"camera");break;case"sound":0==e.values.sound&&0==C||(e.values.sound&&!C?L({type:"click"},"sound"):e.values.sound||L({type:"click"},"sound"));break;case"arrows":if(e.values.arrows){$(".toolArrows").remove();for(t=0;t<e.values.arrows.length;t++)if(e.values.arrows[t]){var i=e.values.arrows[t].key.split("_")[1];i=3<i?i%3!=0?i%3-1:3:i,BrowserDetect.any()?(P({color:i,event:"pseudo",type:"touchstart",originalEvent:{touches:[{pageX:e.values.arrows[t].x,pageY:e.values.arrows[t].y}]},preventDefault:function(){},angle:e.values.arrows[t].angle}),P({color:i,event:"pseudo",type:"touchmove",originalEvent:{touches:[{pageX:e.values.arrows[t].x,pageY:e.values.arrows[t].y}]},preventDefault:function(){},angle:e.values.arrows[t].angle}),P({color:i,event:"pseudo",type:"touchend",originalEvent:{touches:[{pageX:e.values.arrows[t].x,pageY:e.values.arrows[t].y}]},preventDefault:function(){},angle:e.values.arrows[t].angle})):(P({color:i,event:"pseudo",type:"mousedown",pageX:e.values.arrows[t].x,pageY:e.values.arrows[t].y,preventDefault:function(){},angle:e.values.arrows[t].angle}),P({color:i,event:"pseudo",type:"mousemove",pageX:e.values.arrows[t].x,pageY:e.values.arrows[t].y,preventDefault:function(){},angle:e.values.arrows[t].angle}),P({color:i,event:"pseudo",type:"mouseup",pageX:e.values.arrows[t].x,pageY:e.values.arrows[t].y,preventDefault:function(){},angle:e.values.arrows[t].angle}))}}}},this.getCaption=function(){return m.caption},this.isSetable=function(){return m.setable},this.getName=function(){return m.name}};ToolComp.ISACTIVE=!1;var CameraComp=function(){var n,s,r={id:"",x:0,y:0,viewerWidth:450,viewerHeight:445,frame:20,border:!1,left:!0,top:!0,whiteBorder:!1,setable:!1,visible:!0,name:"camera",caption:"Camera"},t=this;this.init=function(e){for(var t in e)r[t]=e[t];r.x=globalResizeCalc(r.x),r.y=globalResizeCalc(r.y);var i=document.createElement("div");n=document.createElement("div");var o=document.createElement("div"),a=document.createElement("div");r.target?r.target.append(i):$(gConfig.elContainer).append(i),r.target=$(i),0==r.visible&&r.target.css("display","none"),r.index&&r.target.css("z-index",r.index),r.target.css({position:"absolute",left:r.x+"px",top:r.y+"px","transform-origin":"0 0","-webkit-transform-origin":"0 0","-ms-transform-origin":"0 0"}),$(n).css({position:"absolute",width:globalResizeCalc(27)+"px",height:globalResizeCalc(21)+"px",background:"url("+gConfig.paths.comImg+"camera.png) no-repeat","background-size":globalResizeCalc(56)+"px "+globalResizeCalc(21)+"px",cursor:"pointer","z-index":1}),$(n).attr("p_title",r.title?GCTConv(r.title):GetGlobalTooltip("tooltip","camera")),r.border?(r.target.append(o).append(a).append(n),$(o).css({position:"absolute",width:globalResizeCalc(4)+"px",height:globalResizeCalc(60)+"px",background:"url("+gConfig.paths.comImg+"gradianLine.png) no-repeat","background-size":"100% 100%"}),$(a).css({position:"absolute",width:globalResizeCalc(4)+"px",height:globalResizeCalc(60)+"px",background:"url("+gConfig.paths.comImg+"gradianLine.png) no-repeat","background-size":"100% 100%"}),r.whiteBorder&&($(o).css({background:"url("+gConfig.paths.comImg+"gradianLineWhite.png) no-repeat","background-size":"100% 100%"}),$(a).css({background:"url("+gConfig.paths.comImg+"gradianLineWhite.png) no-repeat","background-size":"100% 100%"})),r.left&&r.top&&($(o).css({left:"0px",top:"0px"}),$(a).css({left:globalResizeCalc(30)+"px",top:globalResizeCalc(-27)+"px",transform:"rotate(-90deg)","-ms-transform":"rotate(-90deg)","-moz-transform":"rotate(-90deg)","-webkit-transform":"rotate(-90deg)"}),$(n).css({left:globalResizeCalc(-2)+"px",top:globalResizeCalc(-2)+"px"})),r.left&&!r.top&&($(o).css({left:"0px",top:"0px",transform:"rotate(180deg)","-ms-transform":"rotate(180deg)","-moz-transform":"rotate(180deg)","-webkit-transform":"rotate(180deg)"}),$(a).css({left:globalResizeCalc(30)+"px",top:globalResizeCalc(27)+"px",transform:"rotate(-90deg)","-ms-transform":"rotate(-90deg)","-moz-transform":"rotate(-90deg)","-webkit-transform":"rotate(-90deg)"}),$(n).css({left:globalResizeCalc(-2)+"px",top:globalResizeCalc(40)+"px"})),r.left||r.top||($(o).css({left:globalResizeCalc(30)+"px",top:globalResizeCalc(29)+"px",transform:"rotate(90deg)","-ms-transform":"rotate(90deg)","-moz-transform":"rotate(90deg)","-webkit-transform":"rotate(90deg)"}),$(a).css({left:globalResizeCalc(57)+"px",top:globalResizeCalc(5)+"px",transform:"rotate(180deg)","-ms-transform":"rotate(180deg)","-moz-transform":"rotate(180deg)","-webkit-transform":"rotate(180deg)"}),$(n).css({left:globalResizeCalc(37)+"px",top:globalResizeCalc(40)+"px"})),!r.left&&r.top&&($(o).css({left:globalResizeCalc(30)+"px",top:globalResizeCalc(-26)+"px",transform:"rotate(90deg)","-ms-transform":"rotate(90deg)","-moz-transform":"rotate(90deg)","-webkit-transform":"rotate(90deg)"}),$(a).css({left:globalResizeCalc(57)+"px",top:globalResizeCalc(5)+"px",transform:"rotate(0deg)","-ms-transform":"rotate(0deg)","-moz-transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)"}),$(n).css({left:globalResizeCalc(37)+"px",top:globalResizeCalc(-2)+"px"}))):r.target.append(n),BrowserDetect.any()?($(n).bind("touchstart",l),$(n).bind("touchend",l)):($(n).bind("mousedown",l),$(n).bind("click",l)),$(document).on("commonCameraRenderDone",function(e){s&&r.target.show(),s=!1})},this.addEventListener=function(e,t){r[e]=t},this.setStyle=function(e){r.target.css(e)};var i=r.visible;this.show=function(){i=!0,r.target.show()},this.hide=function(){i=!1,r.target.hide()};var o=!0;function l(e){o&&("mousedown"==e.type?$(window).unbind("mouseup",l).bind("mouseup",l):"mouseup"==e.type?($(n).css({"background-position":"0px 0px","background-size":globalResizeCalc(56)+"px "+globalResizeCalc(21)+"px"}),$(window).unbind("mouseup",l)):"click"!=e.type&&"touchend"!=e.type||(s=!0,r.target.hide(),BrowserDetect.ie9()||audioPlayerObj.playAudio("camera"),e.id=r.id,r.click&&r.click(e),$(n).css({"background-position":"0px 0px","background-size":globalResizeCalc(56)+"px "+globalResizeCalc(21)+"px"})),"mousedown"!=e.type&&"touchstart"!=e.type||(focusOutInput(),$(n).css({"background-position":globalResizeCalc(-30)+"px 0px","background-size":globalResizeCalc(56)+"px "+globalResizeCalc(21)+"px"})),e.preventDefault())}this.triggerClick=function(){l({id:r.id,type:"click",event:"pseudo",preventDefault:function(){}})},this.getter=function(){var e=new Object;return e.caption=r.caption?r.caption:r.id,e.common=!0,e.componentname="CameraComp",e.values={},e.values.click=!1,e.settable=r.setable,e.enabled=o,e.visible=i,e},this.setter=function(e){if(e.visible?t.show():0==e.visible&&t.hide(),r.target.css({opacity:1}),e.enabled)o=!0;else if(0==e.enabled)return r.target.css({opacity:.5}),void(o=!1);e.values.click&&l({id:r.id,type:"click",event:"pseudo",preventDefault:function(){}})},this.getCaption=function(){return r.caption},this.isSetable=function(){return r.setable},this.getName=function(){return r.name}},MsgBoxComp=function(){var i,o,a={id:""},t=this;function n(e){t.hideMsg()}this.init=function(e){for(var t in e)a[t]=e[t];i=document.createElement("div"),$(gConfig.elContainer).append(i),$(i).css({position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%",background:"rgba(0,0,0,0.3)","z-index":104,display:"none"}),o=document.createElement("div"),$(i).append(o),$(o).text("ksjk sd sjds dksjdsjd ks jdksjdksjdjs ds djskdjskdjsd dfuhduhfd huhhvksss"),$(o).css({position:"absolute",left:"50%",top:"50%",width:"350px",background:"#FFFFFF","box-shadow":"rgba(0, 0, 0, 0.5) 0px 0px 20px","text-align":"center",padding:"30px",cursor:"default"})},this.showMsg=function(e,t){focusOutInput(),$(o).html(e),setTimeout(function(){$(o).css({"margin-left":$(o).outerWidth()/2*-1,"margin-top":$(o).outerHeight()/2*-1}),$(i).show(),$(i).unbind("click",n),t||$(i).bind("click",n)},100)},this.hideMsg=function(){$(i).hide()},this.addEventListener=function(e,t){a[e]=t}},ToolTipComp=function(){var l,d,i={id:"",index:103},c=this,p=20;function o(e){if(!e&&!d)return!1;if(e?d=BrowserDetect.any()?{pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,type:"touchmove"}:{pageX:e.pageX,pageY:e.pageY,type:"mousemove"}:e={type:d.type},"touchmove"==e.type||e.type,"mouseup"==e.type||"touchend"==e.type)c.hideTip();else{var t=(a=$(l).outerWidth()/2,n=globalResizeCalc(1024)-.65*$(l).outerWidth(),s=$(l).outerHeight()+p,r=globalResizeCalc(680)-$(l).outerHeight(),d.pageX=a>=d.pageX?a:d.pageX,d.pageX=n<=d.pageX?n:d.pageX,d.pageY=r<=d.pageY?r:d.pageY,s>=d.pageY?(d.pageY=d.pageY+globalResizeCalc(10),!1):(d.pageY=d.pageY,!0)),i=d.pageX-$(l).outerWidth()/2;if(e.dir)var o=$(l).outerHeight()+p;else o=t?d.pageY-$(l).outerHeight()-p:d.pageY+p;$(l).css({left:i+"px",top:o+"px"})}var a,n,s,r}this.init=function(e){for(var t in e)i[t]=e[t];l=document.createElement("div"),i.parent?i.parent.append(l):$(".wrapper").append(l),$(l).css({position:"fixed",left:"-500px",background:"rgb(255, 244, 221)","font-size":".75em",padding:"3px 6px","box-shadow":"rgba(0, 0, 0, 0.5) 3px 3px 5px","text-align":"center",display:"table","z-index":i.index}),$(l).hide(),BrowserDetect.any()&&(p=50)},this.showTip=function(e,t){ToolComp.ISACTIVE||($(l).html(e),$(l).show(),-1!=String(e).indexOf("\\begin{equation}")&&printKatex(l,e),o(t))},this.hideTip=function(){$(document).unbind("touchstart",o),$(document).unbind("touchmove",o),$(document).unbind("touchend",o),$(document).unbind("mousemove",o),$(document).unbind("mouseup",o),!1,$(l).hide()},this.addEventListener=function(e,t){i[e]=t}},ArrowPanelComp=function(){var r,l,o,d,c={id:""},a=[0,2,-18,-38,-58,-78,-98,-117];function n(e){if(null==e.pageX&&(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),null!=e.pageX&&null!=e.pageY&&(d={pageX:e.pageX,pageY:e.pageY}),"7"==$(this).data("id"))c.target.animate({right:-1*(Number($(".pointerBox").width())+10)+"px"},200);else if("pointer"==$(this).css("cursor")){r=document.createElement("div");var t=document.createElement("div");$(gConfig.elContainer).append(r),$(r).append(t),$(r).data("id",$(this).data("id")).css({position:"absolute",width:"30px",height:"36px",left:e.pageX-15+"px",top:e.pageY-18+"px"}),$(t).css({position:"absolute",width:"15px",height:"18px",right:"0px",bottom:"0px",background:"url("+gConfig.paths.comImg+"arrowPanelSprite.png) no-repeat","background-position":a[$(this).data("id")]+"px 0px","-webkit-transform":"rotate(-17deg)",transform:"rotate(-17deg)","-moz-transform":"rotate(-17deg)","-ms-transform":"rotate(-17deg)"}),BrowserDetect.any()?($(r).bind("touchstart",p),$(r).bind("touchmove",p),$(r).bind("touchend",p)):$(r).bind("mousedown",p),p(e)}}function p(e){if("touchmove"==e.type&&(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),null!=e.pageX&&null!=e.pageY&&(d={pageX:e.pageX,pageY:e.pageY}),"mousemove"==e.type||"touchmove"==e.type){if(BrowserDetect.any()&&(e.pageY-=35),!l||5<Math.abs(e.pageX-l.x)||5<Math.abs(e.pageY-l.y)){if(l){var t=e.pageX-l.x,i=e.pageY-l.y;180*Math.atan2(i,t)/Math.PI;var o=Math.atan((e.pageY-l.y)/(e.pageX-l.x))*(180/Math.PI),a=10*Math.round(o/10),n=0;e.pageX==l.x&&e.pageY>l.y?n=90:e.pageX>l.x?n=a:e.pageX<l.x?n=a+180:e.pageX==l.x&&e.pageY<l.y&&(n=270),n+=125,$(r).css({left:e.pageX-15+"px",top:e.pageY-18+"px",transform:"rotate("+n+"deg)","-webkit-transform":"rotate("+n+"deg)","-moz-transform":"rotate("+n+"deg)","-ms-transform":"rotate("+n+"deg)"})}l={x:e.pageX,y:e.pageY},!0}$(r).hide();var s=document.elementFromPoint(e.pageX,e.pageY);$(r).show(),"toolDropper"==$(s).attr("class")&&$(r).hide(),e.pageX>=c.target.offset().left&&e.pageX<=c.target.offset().left+c.target.width()&&e.pageY>=c.target.offset().top&&(e.pageY,c.target.offset().top,c.target.height())}if("mouseup"!=e.type&&"touchend"!=e.type||("touchend"==e.type&&(e.pageX=d.pageX,e.pageY=d.pageY),e.pageX>=c.target.offset().left&&e.pageX<=c.target.offset().left+c.target.width()&&e.pageY>=c.target.offset().top&&e.pageY<=c.target.offset().top+c.target.height()&&($(".arrowPanelCompElem[data-id='"+$(r).data("id")+"']").css("opacity",1).css("cursor","pointer"),$(r).hide()),$(window).unbind("mousemove",p).unbind("mouseup",p)),"mousedown"==e.type||"touchstart"==e.type){try{$(this).css("left")&&(r=this)}catch(e){}$(window).unbind("mousemove",p).unbind("mouseup",p).bind("mousemove",p).bind("mouseup",p)}e.preventDefault()}this.init=function(e){for(var t in e)c[t]=e[t];o=new Array;for(t=1;t<=7;t++){var i=document.createElement("div");c.target.append(i),$(i).attr("data-id",t).css({width:"20px",height:"20px",margin:"2px 2px 2px 2px",background:"url("+gConfig.paths.comImg+"arrowPanelSprite.png) no-repeat","background-position":a[t]+"px 0px",cursor:"pointer"}).addClass("arrowPanelCompElem"),o.push($(i)),BrowserDetect.any()?($(i).bind("touchstart",n),$(i).bind("touchmove",p),$(i).bind("touchend",p)):$(i).bind("mousedown",n)}c.target.css({"margin-top":c.target.height()/2+"px"})}},SystemButtonComp=function(){var s,p,u,g,h,b,m,f,x={id:"",orientation:"horizontal",x:0,y:0,content:"controls",onSelect:"",solidBG:!1,whiteColor:!1,playSwitch:!1,margin:5,setable:!0},a=this,o=!1,r=!0;this.init=function(e){for(var t in e)x[t]=e[t];x.x=globalResizeCalc(x.x),x.y=globalResizeCalc(x.y);var i=document.createElement("div");for(var t in x.target?x.target.append(i):$(gConfig.elContainer).append(i),x.target=$(i),0==x.visible&&x.target.css("display","none"),x.index&&x.target.css("z-index",x.index),x.margin=globalResizeCalc(x.margin),x.target.css({position:"absolute",left:x.x+"px",top:x.y+"px","transform-origin":"0 0","-webkit-transform-origin":"0px 0px","-ms-transform-origin":"0 0"}),0==x.showButtons.length&&(x.showButtons=["play","fastForward","pause","reset"]),x.showButtons){var o;o=0==t?d("left",x.showButtons[t]):t==x.showButtons.length-1?d("right",x.showButtons[t]):d("middle",x.showButtons[t]),x.target.append(o)}for(var t in x.showButtons)l(x.showButtons[t]),a.setEnable(x.showButtons[t])},this.addEventListener=function(e,t){x[e]=t},this.setStyle=function(e){x.target.css(e)},this.setEnable=function(e){if(C&&void 0!==e){var t;switch(e){case"play":t=$(p);break;case"pause":t=$(g);break;case"reset":t=$(u);break;case"fastForward":t=$(h);break;case"rewind":t=$(b);break;case"next":t=$(m);break;case"prev":t=$(f)}BrowserDetect.any()?t.unbind("touchstart",i).bind("touchstart",i):BrowserDetect.ChromeBook()||BrowserDetect.WindowsTouch()?t.unbind("touchstart mousedown",i).bind("touchstart mousedown",i):t.unbind("mousedown",i).bind("mousedown",i),t.unbind("click",i).bind("click",i),t.css({opacity:1,cursor:"pointer"}).addClass("isEnabled"),t.find("div").css({opacity:1,cursor:"pointer"})}},this.setDisable=function(e){if(void 0!==e){var t;switch(e){case"play":t=$(p);break;case"pause":t=$(g);break;case"reset":t=$(u);break;case"fastForward":t=$(h);break;case"rewind":t=$(b);break;case"next":t=$(m);break;case"prev":t=$(f)}BrowserDetect.any()?(t.unbind("touchstart",i),t.unbind("touchend",n)):t.unbind("mousedown",i),t.unbind("click",i),t.css({opacity:.5,cursor:"default"}).removeClass("isEnabled"),t.find("div").css({opacity:.5,cursor:"default"})}},this.setPlayOn=function(e){var t=$(p).css("background-position").split(" "),i=$(p).find("div").css("background-position").split(" "),o=x.whiteColor?globalResizeCalc(-92):globalResizeCalc(-4),a=globalResizeCalc(-5);if(e){i[0]=v("play")[4]+"px",$(p).data("type","play"),r=!0;var n=x.title.play?GCTConv(x.title.play):GetGlobalTooltip("tooltip","playBtn");$(p).attr("p_title",GCTConv(n))}else{i[0]=v("pause")[4]+"px",$(p).data("type","pause"),r=!1;n=x.title.pause?GCTConv(x.title.pause):GetGlobalTooltip("tooltip","pauseBtn");$(p).attr("p_title",GCTConv(n))}$(p).css("background-position",t[0]+" "+o+"px"),$(p).find("div").css("background-position",i[0]+" "+a+"px")};var t=!0;function i(e){"mousedown"==e.type||"touchstart"==e.type?(focusOutInput(),audioPlayerObj.playAudio("down"),s=$(this),c(this,"down"),BrowserDetect.any()?$(window).unbind("touchend",n).bind("touchend",n):BrowserDetect.ChromeBook()||BrowserDetect.WindowsTouch()?$(window).unbind("touchend mouseup",n).bind("touchend mouseup",n):$(window).unbind("mouseup mouseleave",n).bind("mouseup mouseleave",n),o=!0):(c(this,"up"),n(e))}function n(e){for(var t in e.id=x.id,e.btnType=s.data("type"),x.click&&o&&x.click(e),o=!1,"mouseleave"!=e.type&&"mouseup"!=e.type&&audioPlayerObj.playAudio("up"),x.showButtons){var i;switch(x.showButtons[t]){case"play":i=$(p);break;case"pause":i=$(g);break;case"reset":i=$(u);break;case"fastForward":i=$(h);break;case"rewind":i=$(b);break;case"next":i=$(m);break;case"prev":i=$(f)}c(i,"up")}$(window).unbind("touchend",n),$(window).unbind("mouseup mouseleave",n)}function l(e){if(void 0!==e)switch(e){case"play":var t=x.title&&x.title.play?GCTConv(x.title.play):GetGlobalTooltip("tooltip","playBtn");$(p).attr("p_title",GCTConv(t)),$(p).find("div").attr("p_title",GCTConv(t));break;case"pause":t=x.title&&x.title.pause?GCTConv(x.title.pause):GetGlobalTooltip("tooltip","pauseBtn");$(g).attr("p_title",GCTConv(t)),$(g).find("div").attr("p_title",GCTConv(t));break;case"reset":t=x.title&&x.title.reset?GCTConv(x.title.reset):GetGlobalTooltip("tooltip","resetBtn");$(u).attr("p_title",GCTConv(t)),$(u).find("div").attr("p_title",GCTConv(t));break;case"fastForward":t=x.title&&x.title.fastforward?GCTConv(x.title.fastforward):GetGlobalTooltip("tooltip","fastforwardBtn");$(h).attr("p_title",GCTConv(t)),$(h).find("div").attr("p_title",GCTConv(t));break;case"rewind":t=x.title&&x.title.rewind?GCTConv(x.title.rewind):GetGlobalTooltip("tooltip","rewindBtn");$(b).attr("p_title",GCTConv(t)),$(b).find("div").attr("p_title",GCTConv(t));break;case"next":t=x.title&&x.title.next?GCTConv(x.title.next):GetGlobalTooltip("tooltip","nextBtn");$(m).attr("p_title",GCTConv(t)),$(m).find("div").attr("p_title",GCTConv(t));break;case"prev":t=x.title&&x.title.prev?GCTConv(x.title.prev):GetGlobalTooltip("tooltip","prevBtn");$(f).attr("p_title",GCTConv(t)),$(f).find("div").attr("p_title",GCTConv(t))}}function d(e,t){var i,o,a,n,s,r,l=document.createElement("div"),d=v(t);switch(i=d[0],o=d[1],a=d[2],n=d[3],s=d[4],r=d[5],d[6],$(l).css({float:"left",width:a+"px",height:n+"px",background:"url("+gConfig.paths.comImg+"systemButtons.png) no-repeat","background-position":i+"px "+o+"px","background-size":globalResizeCalc(500)+"px "+globalResizeCalc(135)+"px",cursor:"pointer",border:"0px solid"}).attr({"data-type":t}),t){case"play":p=l;break;case"pause":g=l;break;case"reset":u=l;break;case"fastForward":h=l;break;case"rewind":b=l;break;case"next":m=l;break;case"prev":f=l}"left"!=e&&$(l).css("margin-left",x.margin);var c=document.createElement("div");return $(c).css({position:"absolute",width:a+"px",height:"100%",background:"url("+gConfig.paths.comImg+"systemButtons.png) no-repeat","background-position":s+"px "+r+"px","background-size":globalResizeCalc(500)+"px "+globalResizeCalc(135)+"px",cursor:"pointer",border:"0px solid"}),$(l).append(c),l}function v(e){var t=[],i=x.showButtons.indexOf(e);switch(0==i?"left":i==x.showButtons.length-1?"right":"middle"){case"left":t[0]=globalResizeCalc(-1),t[2]=globalResizeCalc(50),t[6]=50;break;case"middle":t[0]=globalResizeCalc(-58.5),t[2]=globalResizeCalc(43),t[6]=43;break;case"right":t[0]=globalResizeCalc(-105),t[2]=globalResizeCalc(50),t[6]=50}switch(t[3]=globalResizeCalc(38),t[1]=x.whiteColor?globalResizeCalc(-92):globalResizeCalc(-4),e){case"play":t[4]=globalResizeCalc(-(333-t[6]/2));break;case"pause":t[4]=globalResizeCalc(-(198-t[6]/2));break;case"reset":t[4]=globalResizeCalc(-(479-t[6]/2));break;case"fastForward":t[4]=globalResizeCalc(-(428-t[6]/2));break;case"rewind":t[4]=globalResizeCalc(-(243-t[6]/2));break;case"next":t[4]=globalResizeCalc(-(380-t[6]/2));break;case"prev":t[4]=globalResizeCalc(-(289-t[6]/2))}return t[5]=globalResizeCalc(-5),t}function c(e,t){var i,o,a=$(e).css("background-position").split(" "),n=$(e).find("div").css("background-position").split(" ");"down"==t?(i=globalResizeCalc(-48),o=globalResizeCalc(-46)):(i=x.whiteColor?globalResizeCalc(-92):globalResizeCalc(-4),o=globalResizeCalc(-5)),!x.playSwitch||s.data("type")!=$(e).data("type")||"play"!=$(e).data("type")&&"pause"!=$(e).data("type")||(r&&"up"==t?(n[0]=v("pause")[4]+"px",$(e).data("type","pause"),r=!1):r||"up"!=t||(n[0]=v("play")[4]+"px",$(e).data("type","play"),r=!0)),$(e).css("background-position",a[0]+" "+i+"px"),$(e).find("div").css("background-position",n[0]+" "+o+"px")}this.show=function(e){w&&(t=!0,x.isShown&&x.isShown({show:!0,isFromSetter:e}),x.target.show())},this.hide=function(e){t=!1,x.isShown&&x.isShown({show:!1,isFromSetter:e}),x.target.hide()},this.hideFastForward=function(){$(h).hide()},this.showFastForward=function(){$(h).show()},this.getGSvisible=function(){return w},this.setGSvisible=function(e){w=e},this.getGSenable=function(){return C},this.setGSenable=function(e){C=e};var w=!0,C=!0;this.getter=function(){var e=new Object;return e.caption=x.caption?x.caption:x.id,e.common=!0,e.componentname="SystemButtonComp",e.values={play:1!=$(p).css("opacity"),pause:1!=$(g).css("opacity"),reset:1!=$(u).css("opacity")},-1!=x.showButtons.indexOf("fastForward")&&(e.values.fastForward=1!=$(h).css("opacity")),e.settable=x.setable,e.enabled=getterSetter.isFromInit?y:C,e.visible=getterSetter.isFromInit?t:w,e};var y=!0;this.isEnable=function(){return y},this.setter=function(e){if(w!=e.visible&&((w=e.visible)?a.show(!0):a.hide(!0)),C!=e.enabled){if(!(C=e.enabled)){for(var t in y=!1,x.showButtons)a.setDisable(x.showButtons[t]);return}for(var t in y=!0,x.showButtons)a.setEnable(x.showButtons[t])}var i;getterSetter.isFromReset&&(C=w=!0),s=void 0,e.values.play?(s=$(p),i="play",e.values.fastForward&&(s=$(h),i="fastForward")):e.values.pause?(s=$(g),i="pause",e.values.reset&&(s=$(u),i="reset")):e.values.reset?(s=$(u),i="reset"):e.values.fastForward&&(s=$(h),i="fastForward"),s&&(o=!0,n({id:x.id,type:i})),0==e.values.play?a.setEnable("play"):a.setDisable("play"),0==e.values.pause?a.setEnable("pause"):a.setDisable("pause"),0==e.values.reset?a.setEnable("reset"):a.setDisable("reset"),0==e.values.fastForward?a.setEnable("fastForward"):a.setDisable("fastForward")},this.getCaption=function(){return x.caption},this.isSetable=function(){return x.setable}},ColorBarComp=function(){var o,a,n,s,r,l,d={id:"",x:50,y:0,width:450,height:45,colorStyle:"244,77,63",bold:!1,sqrBox:!0,lineBox:!0,cursor:"default",fontSize:"1em",bgAlpha:.3,paddingTop:10,paddingBottom:10,paddingLeft:10,paddingRight:10,setable:!1},t=this,c=globalResizeCalc(8);this.init=function(e){for(var t in e)d[t]=e[t];switch(d.x=globalResizeCalc(d.x),d.y=globalResizeCalc(d.y),d.width=globalResizeCalc(d.width),d.height=globalResizeCalc(d.height),Number(d.colorStyle)){case 1:s="0,172,239";break;case 2:s="75,83,236";break;case 3:s="244,77,63";break;case 4:s="0,168,110";break;case 5:s="154,54,205";break;default:s=d.colorStyle}d.bold=d.bold?"bold":"normal";var i=document.createElement("div");d.target?d.target.append(i):$(gConfig.elContainer).append(i),d.target=$(i),0==d.visible&&d.target.css("display","none"),d.index&&d.target.css("z-index",d.index),d.title&&d.target.attr("p_title",GCTConv(d.title)),d.target.css({position:"absolute",left:d.x+"px",top:d.y+"px",width:d.width+"px",height:d.height+"px"}),d.sqrBox&&(o=document.createElement("div")),d.lineBox?(a=document.createElement("div"),l=d.width-c):l=d.width,n=document.createElement("div"),d.target.append(o).append(a).append(n),sqrBoxTop=d.height/2-globalResizeCalc(21)/2,$(o).css({position:"absolute",right:globalResizeCalc(20)+"px",top:sqrBoxTop+"px",width:globalResizeCalc(21)+"px",height:globalResizeCalc(21)+"px",background:"rgba("+s+",1)"}),$(a).css({position:"absolute",right:globalResizeCalc(0)+"px",top:globalResizeCalc(0)+"px",width:globalResizeCalc(5)+"px",height:d.height+"px",background:"rgba("+s+",1)"}),$(n).css({position:"absolute",left:globalResizeCalc(0)+"px",top:globalResizeCalc(0)+"px",width:l+"px",height:d.height+"px",background:"rgba("+s+","+d.bgAlpha+")"}),r=document.createElement("div"),$(r).empty(),$(d.target).append(r),$(r).css({position:"relative","padding-top":globalResizeCalc(d.paddingTop)+"px","padding-bottom":globalResizeCalc(d.paddingBottom)+"px","padding-left":globalResizeCalc(d.paddingLeft)+"px","padding-right":globalResizeCalc(d.paddingRight)+"px","font-size":d.fontSize,"margin-left":globalResizeCalc(2)+"px","font-weight":d.bold,cursor:d.cursor}).attr("id","colorBarMathjax_"+d.id),this.setColor(s),d.text&&p(d.text)},this.setLabelText=function(e){p(e)},this.setColor=function(e){var t,i;-1!=e.indexOf("#")&&(i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t=e),s=i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:t,s=String(s.r+", "+s.g+", "+s.b)),$(o).css({background:"rgba("+s+",1)"}),$(a).css({background:"rgba("+s+",1)"}),$(n).css({background:"rgba("+s+","+d.bgAlpha+")"})};var i=!0;function p(e){e&&(e=d.emdash?e.replace(/-/g,"&ndash;"):e,$(r).html(e),-1!=String(e).indexOf("\\begin{equation}")?($(r).css({"padding-top":"0px",opacity:0}),setTimeout(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,"colorBarMathjax_"+d.id],function(){$(r).css("opacity",1)})},10)):$(r).css({"padding-top":globalResizeCalc(d.paddingTop)+"px"}))}this.show=function(e){u&&(i=!0,d.target.show(),d.isShown&&d.isShown({show:i,id:d.id,isFromSetter:e}))},this.hide=function(e){i=!1,d.target.hide(),d.isShown&&d.isShown({show:i,id:d.id,isFromSetter:e})},this.addEventListener=function(e,t){d[e]=t},this.getGSvisible=function(){return u},this.setGSvisible=function(e){u=e},this.updateGSvisible=function(e){this.setGSvisible(e)};var u=!0;this.getter=function(){var e=new Object;e.caption=d.caption?d.caption:d.id,e.common=!0;var t=$(r).text();return d.removeSpace&&(t=t.trim().replace(/\s/gi,"")),e.componentname="ColorBarComp",e.values={text:t},e.settable=d.setable,e.visible=getterSetter.isFromInit?i:u,e},this.setter=function(e){u!=e.visible&&((u=e.visible)?t.show(!0):t.hide(!0)),getterSetter.isFromReset&&(u=!0)},this.isSetable=function(){return d.setable},this.getCaption=function(){return d.caption?d.caption:d.id}},StatusBook=function(){var o,a,n,s,r={x:0,y:0,width:414,height:368,headDivTop:10,headingFont:1.16,subMarginLeft:55,subMarginTop:30,subHeadingFont:.83,contMarginLeft:70,contMarginTop:30,contHeadingFont:.83,mainHeading:"HEADING",subHeading:"SUB - HEADING",content:"Main content goes here.",src:gConfig.paths.comImg+"description.png",inside:!1,shadow:!0};function l(){$(o).html(r.mainHeading),$(a).html(r.subHeading),$(s).html(r.content),!r.inside&&$(n).css("height",r.height-$(o).outerHeight(!0)-parseInt($(o).css("margin-top"))+"px")}this.init=function(e){for(var t in e)r[t]=e[t];r.x=globalResizeCalc(r.x),r.y=globalResizeCalc(r.y),r.width=globalResizeCalc(r.width),r.height=globalResizeCalc(r.height),r.headDivTop=globalResizeCalc(r.headDivTop),r.subMarginLeft=globalResizeCalc(r.subMarginLeft),r.subMarginTop=globalResizeCalc(r.subMarginTop),r.contMarginLeft=globalResizeCalc(r.contMarginLeft),r.contMarginTop=globalResizeCalc(r.contMarginTop);var i=document.createElement("div");r.target?r.target.append(i):$(gConfig.elContainer).append(i),r.target=$(i),0==r.visible&&r.target.css("display","none"),r.index&&r.target.css("z-index",r.index),r.title&&r.target.attr("p_title",GCTConv(r.title)),r.target.css({position:"absolute",left:r.x+"px",top:r.y+"px",width:r.width+"px",height:r.height+"px",background:r.background||"rgba(0,0,0,0)",cursor:"default"}),o=document.createElement("div"),n=document.createElement("div"),!r.inside&&r.target.append(o),r.target.append(n),r.inside&&$(n).append(o),$(o).css({"margin-top":r.headDivTop+"px","text-align":"center",width:"100%","font-family":"Arial","font-size":r.headingFont+"em",background:"rgba(255,0,0,0)"}),$(n).css({position:"absolute",left:"0px",bottom:"0px",width:r.width+"px",height:r.height+"px",background:"url("+r.src+") no-repeat","background-size":"100% 100%",overflow:"hidden"}),r.shadow&&$(n).css({"box-shadow":"5px 5px 6px 2px rgba(0, 0, 0, 0.3)"}),a=document.createElement("div"),s=document.createElement("div"),$(n).append(a).append(s),$(a).css({"margin-top":r.subMarginTop+"px","margin-left":r.subMarginLeft+"px","text-align":"left",width:"86%","font-family":"Arial","font-size":r.subHeadingFont+"em",background:"rgba(255,0,0,0)"}),$(s).css({"margin-left":r.contMarginLeft+"px","margin-top":r.contMarginTop+"px","text-align":"left",width:"80%","font-family":"Arial","font-size":r.contHeadingFont+"em",background:"rgba(255,0,0,0)"}),l()},this.setMainHeading=function(e){r.mainHeading=e,l()},this.setSubHeading=function(e){r.subHeading=e,l()},this.setContentHeading=function(e){r.content=e,l()},this.updateStyle=function(e,t){"contDiv"==e?$(s).css(t):"subDiv"==e?$(a).css(t):"headDiv"==e&&$(o).css(t)},this.getMainHeading=function(){return r.mainHeading},this.getSubHeading=function(){return r.subHeading},this.getContentHeading=function(){return r.content},this.show=function(){r.target.css("visibility","visible")},this.hide=function(){r.target.css("visibility","hidden")}},RadioButtonComp=function(){var a,n,s,r,l={id:"",x:0,y:0,selectedIndex:0,orientation:"v",padding:10,radioLabelMargin:5,fontSize:"1em",labelColor:"#000000",enabled:!0,optionLableArr:[],optionRadioArr:[],verticalAlign:!1,labelTextShadow:"none",setable:!0,enableArray:[],visibleArray:[],setableIndividual:!1},i=this,d=new Array,c=globalResizeCalc(29);this.init=function(e){for(var t in e)l[t]=e[t];l.x=globalResizeCalc(l.x),l.y=globalResizeCalc(l.y),l.padding=globalResizeCalc(l.padding),l.radioLabelMargin=globalResizeCalc(l.radioLabelMargin),l.width&&(l.width=globalResizeCalc(l.width));var i=document.createElement("div");for(var t in l.target?l.target.append(i):$(gConfig.elContainer).append(i),l.target=$(i),0==l.visible&&l.target.css("display","none"),l.index&&l.target.css("z-index",l.index),l.target.css({position:"absolute",left:l.x+"px",top:l.y+"px"}),l.optionLableArr=[],l.optionRadioArr=[],l.labelArr)f.push(!0),x.push(!0);if(0!=l.labelArr.length){for(t=0;t<l.labelArr.length;t++){if(l.enableArray[t]=!0,l.visibleArray[t]=!0,a=document.createElement("div"),l.target.append(a),n=document.createElement("div"),s=document.createElement("canvas"),r=document.createElement("div"),$(a).append(n).append(r),$(n).append(s),$(n).css({display:"table-cell",width:Math.round(c)+"px"}),s.width=Math.round(c),s.height=Math.round(c),$(s).css({"margin-bottom":globalResizeCalc(-5)+"px"}),$(s).attr("p_title",l.title?"object"==_typeof(l.title)?GCTConv(l.title[t]):GCTConv(l.title):GetGlobalTooltip("tooltip","genricClick")),l.optionRadioArr.push(s),l.setXY){var o=l.setXY[t].split(":");$(a).css({position:"absolute",cursor:"pointer",display:"table",left:globalResizeCalc(o[0])+"px",top:globalResizeCalc(o[1])+"px",width:l.width+"px"})}else $(a).css({cursor:"pointer",width:l.width+"px",height:c+"px"}),"v"==l.orientation?$(a).css({display:"table","margin-bottom":l.padding+"px"}):$(a).css({display:"inline-block","margin-right":l.padding+"px"});$(a).attr("data-radiogroup_"+l.id,t),d.push($(a)),$(r).css({display:"table-cell","padding-left":l.radioLabelMargin+"px","white-space":"nowrap","font-size":l.fontSize,color:l.labelColor,"text-shadow":l.labelTextShadow}).html(l.labelArr[t]),l.optionLableArr.push(r),l.verticalAlign&&$(r).css("vertical-align","middle"),$(r).attr("p_title",l.title?"object"==_typeof(l.title)?GCTConv(l.title[t]):GCTConv(l.title):GetGlobalTooltip("tooltip","genricClick")),this.setEnable(!0)}h()}p=0!=l.visible},this.setStyle=function(e){l.target.css(e)},this.setText=function(e,t){for(var i=0;i<e.length;i++)e[i]&&$(l.optionLableArr[i]).html(e[i]),void 0!==t&&t[i]?($(l.optionLableArr[i]).attr("p_title",t[i]),$(l.optionRadioArr[i]).attr("p_title",t[i])):($(l.optionLableArr[i]).attr("p_title",GCTConv(GetGlobalTooltip("tooltip","genricClick"))),$(l.optionRadioArr[i]).attr("p_title",GCTConv(GetGlobalTooltip("tooltip","genricClick"))))},this.addEventListener=function(e,t){l[e]=t},this.setSelected=function(e){l.selectedIndex=e,o("pseudo")},this.getSelected=function(){return l.selectedIndex},this.setLabelColor=function(e){l.labelColor=e,$(r).css({color:l.labelColor})},this.getLabelColor=function(){return l.labelColor},this.getGSvisible=function(){return b},this.setGSvisible=function(e){b=e},this.getGSenable=function(){return m},this.setGSenable=function(e){m=e},this.setEnable=function(e,t){for(var i=void 0===t?d:t,o=0;o<i.length;o++){var a=void 0===t?o:t[o];if(e){if(m){if(l.setableIndividual&&!x[a])return;l.setableIndividual||(l.enabled=e),l.enableArray[a]=!0,BrowserDetect.any()?d[a].unbind("touchstart",u).bind("touchstart",u).unbind("touchend",g).bind("touchend",g):BrowserDetect.ChromeBook()||BrowserDetect.WindowsTouch()?(d[a].unbind("mousedown touchstart",u).bind("mousedown touchstart",u),d[a].unbind("mouseup touchend",g).bind("mouseup touchend",g)):d[a].unbind("mousedown",u).bind("mousedown",u),d[a].unbind("click",u).bind("click",u),d[a].css({cursor:"pointer",opacity:1}),l.isEnable&&l.isEnable({enable:!0,isFromSetter:v})}}else l.setableIndividual||(l.enabled=e),l.enableArray[a]=!1,BrowserDetect.any()?d[a].unbind("touchstart",u).unbind("touchend",g):BrowserDetect.ChromeBook()||BrowserDetect.WindowsTouch()?d[a].unbind("mousedown touchstart",u).unbind("mouseup touchend",g):d[a].unbind("mousedown",u),d[a].unbind("click",u),d[a].css({cursor:"default",opacity:.5}),l.isEnable&&l.isEnable({enable:!1,isFromSetter:v})}},this.getEnable=function(){return l.enabled},this.getEnableArray=function(){return l.enableArray},this.getVisibleArray=function(){return l.visibleArray};var p=l.visible;function u(e){var t=$(this).attr("data-radiogroup_"+l.id);l.selectedIndex==t&&"pseudo"!=e.event||("mousedown"==e.type||"touchstart"==e.type?(focusOutInput(),audioPlayerObj.playAudio("down"),d[t].find("canvas")[0].down=!0,h(),(BrowserDetect.ChromeBook()||BrowserDetect.WindowsTouch())&&(l.selectedIndex=t,o(e.event)),"mousedown"==e.type&&$(window).unbind("mouseup",g).bind("mouseup",g)):("pseudo"==e.event?l.selectedIndex=e.selected:l.selectedIndex=t,o(e.event)))}function g(e){audioPlayerObj.playAudio("up");for(var t=0;t<d.length;t++)d[t].find("canvas")[0].down=!1;h(),$(window).unbind("mouseup",g)}function h(){for(var e=0;e<d.length;e++){var t=d[e].find("canvas")[0];t.width=t.width,t.getContext("2d").beginPath(),t.getContext("2d").arc(t.width/2,t.height/2,t.width/2-globalResizeCalc(2),0,2*Math.PI),t.getContext("2d").fillStyle=t.down?"rgba(153, 153, 153, 0.6)":"rgba(255, 255, 255, 0.6)",t.getContext("2d").fill(),t.getContext("2d").lineWidth=globalResizeCalc(4),t.getContext("2d").strokeStyle=t.down?"#545454":"#999999",t.getContext("2d").stroke(),l.selectedIndex==e&&(t.getContext("2d").beginPath(),t.getContext("2d").arc(t.width/2,t.height/2,t.width/2-globalResizeCalc(7),0,2*Math.PI),t.getContext("2d").fillStyle="#666666",t.getContext("2d").fill())}}function o(e){for(var t=0;t<d.length;t++)d[t].find("canvas")[0].down=!1;h(),l.onRdSelect&&l.onRdSelect({id:l.id,selected:l.selectedIndex,event:e})}this.show=function(e){if(b)if(void 0===e){for(var t in l.target.show(),p=!0,l.visibleArray)f[t]&&(l.visibleArray[t]=!0,$(d[t]).show());l.isShown&&l.isShown({status:!0,isFromSetter:v})}else{for(var t in e)if(f[e[t]]){var i=Number(e[t]);l.visibleArray[i]=!0,$(d[i]).show()}l.isShown&&l.isShown({status:!0,isFromSetter:v})}},this.hide=function(e){if(void 0===e){for(var t in l.target.hide(),p=!1,l.visibleArray)l.visibleArray[t]=!1;l.isShown&&l.isShown({status:!1,isFromSetter:v})}else{for(var t in e){var i=Number(e[t]);l.visibleArray[i]=!1,$(d[i]).hide()}l.isShown&&l.isShown({status:!1,isFromSetter:v})}};var b=!0,m=!0,f=[],x=[],v=!(this.getter=function(){var i=new Object;return i.caption=l.caption?l.caption:l.id,i.common=!0,i.componentname="RadioButtonComp",i.values={selected:1*l.selectedIndex},l.getterLabel&&0<=l.selectedIndex&&(i.values.value=$(l.optionLableArr[l.selectedIndex]).text().trim()),l.setableIndividual&&(i.values.radios=[],l.optionLableArr.forEach(function(e,t){i.values.radios.push({visible:getterSetter.isFromInit?l.visibleArray[t]:f[t],enable:getterSetter.isFromInit?l.enableArray[t]:x[t]})})),i.settable=l.setable,i.enabled=getterSetter.isFromInit?l.enabled:m,i.visible=getterSetter.isFromInit?p:b,i});this.setter=function(e){if(v=!0,b!=e.visible&&((b=e.visible)?i.show():i.hide()),m!=e.enabled)for(var t in m=e.enabled,d)i.setEnable(m,t);if(getterSetter.isFromReset&&(m=b=!0),(l.enableArray[1*e.values.selected]||l.selectedIndex!=e.values.selected)&&(e.values.selected||1*e.values.selected==0)&&u({id:l.id,type:"click",event:"pseudo",selected:e.values.selected}),l.setableIndividual&&(e.values.radios.forEach(function(e,t){f[t]!=e.visible&&(f[t]=e.visible,f[t]?i.show([t]):i.hide([t])),x[t]!=e.enable&&(x[t]=e.enable,i.setEnable(x[t],[t]))}),getterSetter.isFromReset))for(var t in f=[],x=[],l.labelArr)f.push(!0),x.push(!0);v=!1},this.getCaption=function(){return l.caption},this.isSetable=function(){return l.setable}},DropDownComp=function(){var s,r,l,d,c,p,n,u,g,h={id:"",x:50,y:0,width:200,boxHeight:30,fontSize:"1em",align:"left",downwards:!0,border:!0,customAlpha:.6,paddingTop:10,listLeftPadding:18,setable:!0,isEnable:!0},i=0,b=0,m=new Array,f=this;function x(){if(0!=h.tabItem.length){var e;$(d).empty(),m=new Array;var t=h.width;t-=globalResizeCalc(22),$(d).css((_defineProperty(e={position:"relative",top:"0px","list-style-type":"none",display:"inline-block",background:"rgba(0, 0, 0,0.2)",width:t+"px",padding:h.paddingTop/2+"px "+globalResizeCalc(12)+"px "+globalResizeCalc(12)+"px "+globalResizeCalc(12)+"px",margin:"0px"},"padding","0px"),_defineProperty(e,"z-index",100),_defineProperty(e,"background","#fff"),e)),void 0!==h.height&&$(c).css("max-height",h.height+"px");for(var i=0,o=0;o<h.tabItem.length;o++){var a=document.createElement("li");$(d).append(a),$(a).attr({"data-dropdownid":o}),$(a).css({"text-align":h.align,padding:h.paddingTop+"px",background:"#FFFFFF","font-family":"Arial","font-weight":"bold","font-size":h.fontSize,cursor:"pointer","padding-left":h.listLeftPadding+"px"}),m.push($(a)),$(a).unbind("click",E).bind("click",E),BrowserDetect.any()?$(a).unbind("touchstart",k).bind("touchstart",k).unbind("touchend",k).bind("touchend",k):($(a).unbind("mousedown",k).bind("mousedown",k),$(a).unbind("mouseover",y).bind("mouseover",y),$(a).unbind("mouseout",z).bind("mouseout",z)),$(a).html("<span>"+h.tabItem[o]+"</span>"),0==o&&$(a).css("background","#666").css("color","#fff").addClass("selected"),i+=$(a).outerHeight()}b=i,h.height&&h.height+$(a).outerHeight()<b?(u=document.createElement("div"),$(c).append(u),$(u).css({position:"absolute",right:"0px",top:"0px",width:globalResizeCalc(20)+"px",height:h.height+"px",background:"#E5E5E5","box-shadow":"2px 2px 10px rgba(0,0,0,0.5) inset"}),sliderHold=document.createElement("div"),$(u).append(sliderHold),$(sliderHold).css({position:"absolute",left:globalResizeCalc(5)+"px",top:globalResizeCalc(5)+"px",width:globalResizeCalc(20)-globalResizeCalc(10)+"px",height:parseInt($(u).css("height"))-h.paddingTop+"px"}),g=document.createElement("div"),$(sliderHold).append(g),$(g).css({position:"absolute",left:"0px",top:"0px",width:globalResizeCalc(20)-globalResizeCalc(10)+"px",height:h.boxHeight+"px",background:"#FFFFFF","background-size":h.paddingTop+"px "+globalResizeCalc(17)+"px","background-position":"center","box-shadow":"2px 2px 5px rgba(0,0,0,0.5)"}).attr("p_title",GetGlobalTooltip("tooltip","tablescroll")),$(g).addClass("commongrab"),$(g).draggable({containment:"parent",drag:v}),BrowserDetect.any()?$(g).unbind("touchstart",w).bind("touchstart",w).unbind("touchend",w).bind("touchend",w):$(g).unbind("mousedown",w).bind("mousedown",w),$(c).css({height:$(d).height()})):($(c).css({height:"auto"}),$(d).css({width:$(c).width()}))}$(r).html(h.tabItem[0]),n=h.tabItem[0]}function v(e,t){var i=parseInt($(g).css("top")),o=parseInt($(sliderHold).css("height"))-parseInt($(g).css("height")),a=(b-h.height)*(i/o);a=-1*Math.abs(a),$(d).css("top",a)}function w(e){"mousedown"==e.type||"touchstart"==e.type?(focusOutInput(),addPointerGrabbing(!0),audioPlayerObj.playAudio("down"),BrowserDetect.any()||$(document).unbind("mouseup",w).bind("mouseup",w)):"mouseup"!=e.type&&"touchend"!=e.type||(audioPlayerObj.playAudio("up"),addPointerGrabbing(!1),$(document).unbind("mouseup",w))}this.init=function(e){for(var t in e)h[t]=e[t];h.x=globalResizeCalc(h.x),h.y=globalResizeCalc(h.y),h.width=globalResizeCalc(h.width),h.boxHeight=globalResizeCalc(h.boxHeight),h.paddingTop=globalResizeCalc(h.paddingTop),h.listLeftPadding=globalResizeCalc(h.listLeftPadding),void 0===h.bgColor&&(h.bgColor="rgba(255, 255, 255,"+h.customAlpha+")"),void 0!==h.height&&(h.height=globalResizeCalc(h.height));var i=document.createElement("div"),o=h.width-globalResizeCalc(35);h.target?h.target.append(i):$(gConfig.elContainer).append(i),h.target=$(i),0==h.visible&&h.target.css("display","none"),h.index&&h.target.css("z-index",h.index),h.title&&h.target.attr("p_title",GCTConv(h.title)),h.target.css({position:"absolute",left:h.x+"px",top:h.y+"px",background:"rgba(0, 0, 0,0.2)"}),s=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div"),p=document.createElement("div"),d=document.createElement("ul"),h.target.append(s),$(s).append(r).append(l),$(s).css({background:"rgba(255, 255, 255, 0.6)",float:"left",width:h.width+"px",height:"auto",cursor:"pointer"}),h.title&&$(s).attr("p_title",GCTConv(h.title));var a=globalResizeCalc(1)<1?1:globalResizeCalc(1),n=h.boxHeight-2*h.paddingTop;h.border?h.target.css("box-shadow","0px 0px 0px "+globalResizeCalc(3)+"px rgba(255, 255, 255, 0.6) , 0px 0px 0px "+globalResizeCalc(8)+"px rgba(0,0,0,0.2), "+a+"px "+a+"px 0px 0px rgba(0,0,0,0), -"+a+"px -"+a+"px 0px 0px #FFFFFF"):h.target.css("box-shadow","0px 0px 0px "+globalResizeCalc(3)+"px rgba(255, 255, 255, 0.6)"),$(r).css({"text-align":h.align,background:h.bgColor,"box-shadow":a+"px "+a+"px 0px 0px #999999, -"+a+"px -"+a+"px 0px 0px #ffffff",color:"#363336","font-family":"Arial","font-weight":"bold","font-size":h.fontSize,padding:h.paddingTop+"px 0px","padding-left":globalResizeCalc(6)+"px",width:o+globalResizeCalc(6)+"px",float:"left",height:"auto","word-wrap":"break-word"}),h.title&&$(r).attr("p_title",GCTConv(h.title)),$(l).css({float:"right",right:globalResizeCalc(4)+"px",background:"url("+gConfig.paths.comImg+"ddarrow.png) no-repeat "+h.bgColor,"background-position":"center","background-size":globalResizeCalc(13)+"px "+globalResizeCalc(8)+"px","box-shadow":a+"px "+a+"px 0px 0px #999999, -"+a+"px -"+a+"px 0px 0px #ffffff",width:globalResizeCalc(18)+"px",height:n+"px"}),h.title&&$(l).attr("p_title",GCTConv(h.title)),$(c).css(_defineProperty({position:"absolute",left:"0px",display:"inline-block",width:h.width+"px",background:"rgba(0, 0, 0,0.2)"},"display","block")),h.border?$(c).css({"box-shadow":" 0px 0px 0px "+globalResizeCalc(8)+"px rgba(0,0,0,0.2)","margin-top":globalResizeCalc(15)+"px"}):$(c).css({"box-shadow":"0px 0px 0px "+globalResizeCalc(3)+"px rgba(255, 255, 255, 0.6)","margin-top":globalResizeCalc(3)+"px"}),$(p).css({display:"inline-block",width:h.width}),h.height&&$(p).css({height:h.height,overflow:"hidden"}),h.target.append(c),$(c).append(p),$(p).append(d),x(),BrowserDetect.any()?($(s).unbind("touchstart",R).bind("touchstart",R),$(s).unbind("touchend",R).bind("touchend",R)):$(s).unbind("mousedown",R).bind("mousedown",R),$(s).unbind("click",T).bind("click",T),S(),h.selectedIndex&&f.setSelcetedIndex(h.selectedIndex),$(c).hide(),C=0!=h.visible},this.addEventListener=function(e,t){h[e]=t},this.setStatus=function(e){e?B&&(h.isEnable=!0,BrowserDetect.any()?($(s).unbind("touchstart",R).bind("touchstart",R),$(s).unbind("touchend",R).bind("touchend",R)):($(s).unbind("mousedown",R).bind("mousedown",R),$(s).css("cursor","pointer")),$(s).unbind("click",T).bind("click",T),$(s).css("opacity",1)):(h.isEnable=!1,BrowserDetect.any()?($(s).unbind("touchstart",R),$(s).unbind("touchend",R)):($(s).unbind("mousedown",R),$(s).css("cursor","default")),$(s).unbind("click",T),$(s).css("opacity",.7))},this.setSelcetedIndex=function(e){a(),$(r).html(h.tabItem[e]),S(),i=e,n=h.tabItem[e],F(e)},this.getSelcetedIndex=function(){return i},this.updateListItem=function(e){h.tabItem=[];for(var t=0;t<e.length;t++)h.tabItem[t]=e[t];$(c).show(),x(),S(),$(c).hide()};var C=h.visible;function y(e){$(this).css("background","#666").css("color","#fff")}function z(e){$(this).hasClass("selected")||$(this).css("background","#fff").css("color","#000")}function k(e){"mousedown"==e.type||"touchstart"==e.type?(audioPlayerObj.playAudio("down"),"mousedown"==e.type&&$(document).unbind("mouseup",k).bind("mouseup",k)):"mouseup"!=e.type&&"touchend"!=e.type||(audioPlayerObj.playAudio("up"),$(document).unbind("mouseup",k))}function o(e){"touchstart"==e.type&&(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY);var t=e.pageX<h.target.offset().left||e.pageX>h.target.offset().left+h.target.outerWidth(!0);if(h.downwards)var i=e.pageY<h.target.offset().top||e.pageY>h.target.offset().top+h.target.outerHeight(!0)+$(c).outerHeight(!0);else i=e.pageY>h.target.offset().top+h.target.outerHeight(!0)||e.pageY<h.target.offset().top-$(c).outerHeight(!0);(t||i)&&($(c).hide(),$(document).unbind("mousedown",o),$(document).unbind("touchstart",o))}function R(e){var t=globalResizeCalc(1)<1?1:globalResizeCalc(1);"mousedown"==e.type||"touchstart"==e.type?(focusOutInput(),$(r).css({background:"#666666","box-shadow":"0px 0px 0px "+t+"px #545454",color:"#FFFFFF"}),$(l).css({background:"url("+gConfig.paths.comImg+"ddarrowdown.png) no-repeat #666666","background-position":"center","background-size":globalResizeCalc(13)+"px "+globalResizeCalc(8)+"px","box-shadow":"0px 0px 0px "+t+"px #545454"}),$(document).unbind("mouseup",R).bind("mouseup",R),audioPlayerObj.playAudio("down"),h.downEvt&&h.downEvt({id:h.id})):"mouseup"!=e.type&&"touchend"!=e.type||($(document).unbind("mouseup",R),$(r).css({background:h.bgColor,"box-shadow":t+"px "+t+"px 0px 0px #999999, -"+t+"px -"+t+"px 0px 0px #ffffff",color:"#363336"}),$(l).css({background:"url("+gConfig.paths.comImg+"ddarrow.png) no-repeat "+h.bgColor,"background-position":"center","background-size":globalResizeCalc(13)+"px "+globalResizeCalc(8)+"px","box-shadow":t+"px "+t+"px 0px 0px #999999, -"+t+"px -"+t+"px 0px 0px #ffffff"}),audioPlayerObj.playAudio("up"))}function T(e){S(),"none"==$(c).css("display")?($(c).show(),BrowserDetect.any()?$(document).unbind("touchstart",o).bind("touchstart",o):$(document).unbind("mousedown",o).bind("mousedown",o)):($(c).hide(),$(document).unbind("touchstart",o),$(document).unbind("mousedown",o))}function S(){h.downwards?$(c).css("top","100%"):($(c).css("top",""),h.border?$(c).css("bottom",h.target.outerHeight(!0)+globalResizeCalc(15)+"px"):$(c).css("bottom",h.target.outerHeight(!0)+globalResizeCalc(5)+"px")),$(l).css("height",$(r).height()+2*h.paddingTop+"px"),$(r).outerHeight()>=h.boxHeight?$(s).css("height",$(r).outerHeight()+"px"):$(s).css("height",h.boxHeight+"px")}function E(e){var t=$(this).attr("data-dropdownid");a(),$(this).css("background","#666").css("color","#fff"),$(this).unbind("hover"),$(r).html(h.tabItem[t]),"pseudo"!=e.event&&(n=h.tabItem[t]),$(h.target).height(),S(),$(this).parent().parent().parent().hide(),i="pseudo"==e.event?e.selected:t,h.onIndxSelect&&h.onIndxSelect({id:h.id,value:i,event:e.event}),F(i),$(r).outerHeight()>=h.boxHeight?$(s).css("height",$(r).outerHeight()+"px"):$(s).css("height",h.boxHeight+"px")}function a(){for(var e=0;e<h.tabItem.length;e++)m[e].css("background","#fff").css("color","#000")}function F(e){for(var t=0;t<m.length;t++)t==e?m[t].css("background","#666").css("color","#fff").addClass("selected"):m[t].removeClass("selected")}this.show=function(e){t&&(C=!0,h.target.show(),h.isShown&&h.isShown({status:!0,enable:h.isEnable,event:e}))},this.hide=function(e){C=!1,h.target.hide(),h.isShown&&h.isShown({status:!1,enable:h.isEnable,event:e})},this.setSelectedText=function(e){n=e},this.getSelectedText=function(){return n},this.updateCss=function(e){h.target.css(e)},this.getGSvisible=function(){return t},this.setGSvisible=function(e){t=e},this.getGSenable=function(){return B},this.setGSenable=function(e){B=e};var t=!0,B=!0;this.getter=function(){var e=new Object;return e.caption=h.caption?h.caption:h.id,e.common=!0,e.componentname="DropDownComp",e.values={selected:1*f.getSelcetedIndex(),value:h.textArray?h.textArray[1*f.getSelcetedIndex()]:f.getSelectedText()},e.settable=h.setable,e.enabled=getterSetter.isFromInit?h.isEnable:B,e.visible=getterSetter.isFromInit?C:t,e},this.setter=function(e){t!=e.visible&&((t=e.visible)?f.show("pseudo"):f.hide("pseudo")),B!=e.enabled&&((B=e.enabled)?f.setStatus(!0):f.setStatus(!1)),getterSetter.isFromReset&&(B=t=!0),(e.values.selected||1*e.values.selected==0)&&(f.show("pseudo"),h.setFromItemName&&(e.values.selected=h.tabItem.indexOf(e.values.value)),f.setSelcetedIndex(e.values.selected),E({id:h.id,selected:e.values.selected,event:"pseudo"}),n=h.tabItem[e.values.selected],0==e.visible&&f.hide("pseudo"))},this.getCaption=function(){return h.caption},this.isSetable=function(){return h.setable}},TextLabelComp=function(){var e,o=(_defineProperty(e={x:0,y:0,align:"left",html:"",color:"#000000",border:"1px solid transparent",bold:!1,fontFamily:"inherit",fontSize:"1em",bgColor:"",paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0},"color",""),_defineProperty(e,"emdash",!1),_defineProperty(e,"cursor","default"),_defineProperty(e,"katex",!1),e),i=this;this.init=function(e){for(var t in e)o[t]=e[t];o.x=globalResizeCalc(o.x),o.y=globalResizeCalc(o.y),o.width&&(o.width=globalResizeCalc(o.width)),o.height&&(o.height=globalResizeCalc(o.height)),o.bold=o.bold?"bold":"normal";var i=document.createElement("div");o.target?o.target.append(i):$(gConfig.elContainer).append(i),o.target=$(i),0==o.visible&&o.target.css("display","none"),o.index&&o.target.css("z-index",o.index),o.title&&o.target.attr("p_title",GCTConv(o.title)),o.target.attr("id",o.id+"_mathjaxid"),o.class&&o.target.attr("class",o.class),o.target.css({position:"absolute",left:o.x+"px",top:o.y+"px","font-family":o.fontFamily,"text-align":o.align,"font-size":o.fontSize,background:o.bgColor,"padding-top":globalResizeCalc(o.paddingTop)+"px","padding-right":globalResizeCalc(o.paddingRight)+"px","padding-bottom":globalResizeCalc(o.paddingBottom)+"px","padding-left":globalResizeCalc(o.paddingLeft)+"px",border:o.border,color:o.color,"font-weight":o.bold,cursor:o.cursor}),o.border&&o.target.css({border:o.border}),void 0!==o.rotation&&o.target.css({"-webkit-transform-origin":"left center","-ms-transform-origin":"left center","transform-origin":"left center"}),o.width&&o.target.css("width",o.width+"px"),o.height&&o.target.css("height",o.height+"px"),this.setText(o.html)},this.setText=function(e){if(void 0!==o.rotation&&o.target.css({"-webkit-transform":"rotate(0deg)","-ms-transform":"rotate(0deg)",transform:"rotate(0deg)"}),o.html=o.emdash?e.replace(/-/g,"&ndash;"):e,-1!=String(o.html).indexOf("localMJ_i")||-1!=String(o.html).indexOf("localMJ_n")?o.target.css("margin-top","-"+globalResizeCalc(5)+"px"):o.target.css("margin-top","auto"),o.target.html(o.html),-1!=String(e).indexOf("\\begin{equation}"))if(o.katex)printKatex(o.target[0],e),$("#"+o.id+"_mathjaxid .katex").css("font-weight",o.bold);else{o.target.css({"padding-top":"0px",opacity:0});var t=MathJax.Hub.getAllJax(o.id+"_mathjaxid")[0],i=t?["Text",t,e]:["Typeset",MathJax.Hub,o.id+"_mathjaxid"];MathJax.Hub.Queue(i,o.id+"_mathjaxid",function(){var e=o.target.children(".MathJax_Display");e&&0!=$(o.target).text().indexOf("\\")&&(e.css("text-align",o.align),o.target.css("opacity",1))})}else o.target.css({"padding-top":globalResizeCalc(o.paddingTop)+"px"});void 0!==o.rotation&&o.target.css({left:o.x+o.target.outerWidth(!0)/2+"px",top:o.y+o.target.outerWidth(!0)/2+"px","-webkit-transform":"rotate("+o.rotation+"deg)","-ms-transform":"rotate("+o.rotation+"deg)",transform:"rotate("+o.rotation+"deg)"})},this.getText=function(e){return null==e?o.html:o.target.text()},this.setColor=function(e){o.color=e,o.target.css("color",o.color)},this.setStyle=function(e){o.target.css(e)};var a=!0;this.show=function(e){s&&(a=!0,o.target.show(),o.isShown&&o.isShown({show:!0,isFromSetter:e}))},this.hide=function(e){a=!1,o.target.hide(),o.isShown&&o.isShown({show:!1,isFromSetter:e})},this.addEventListener=function(e,t){o[e]=t};var n=!0;this.enable=function(e){r&&(n=!0,o.target.css("opacity",1),o.isEnable&&o.isEnable({enable:!0,isFromSetter:e}))},this.disable=function(e){n=!1,o.target.css("opacity",.5),o.isEnable&&o.isEnable({enable:!1,isFromSetter:e})},this.getGSvisible=function(){return s},this.setGSvisible=function(e){s=e},this.getGSenable=function(){return r},this.setGSenable=function(e){r=e};var s=!0,r=!0;this.getter=function(){var e=new Object;e.caption=o.caption?o.caption:o.id,e.common=!0,e.componentname="TextLabelComp";var t=i.getText(!0);return o.removeSpace&&(t=t.trim().replace(/\s/gi,"")),e.values={text:isNaN(t)?t:""==t?t:Number(t)},e.settable=o.setable,e.enabled=getterSetter.isFromInit?n:r,e.visible=getterSetter.isFromInit?a:s,e},this.updateGSvisible=function(e){this.setGSvisible(e)},this.updateGSenable=function(e){this.setGSenable(e)},this.setter=function(e){s!=e.visible&&((s=e.visible)?i.show(!0):i.hide(!0)),r!=e.enabled&&((r=e.enabled)?i.enable(!0):i.disable(!0)),getterSetter.isFromReset&&(r=s=!0)},this.isSetable=function(){return o.setable},this.getCaption=function(){return o.caption}},ImageComp=function(){var i,n={x:0,y:0,type:"img",backgroundFit:!1,clickable:!1};this.init=function(e){for(var t in e)n[t]=e[t];n.x=globalResizeCalc(n.x),n.y=globalResizeCalc(n.y),n.width&&(n.width=globalResizeCalc(n.width)),n.height&&(n.height=globalResizeCalc(n.height)),i=document.createElement(n.type),n.target?n.target.append(i):$(gConfig.elContainer).append(i),n.target=$(i),n.target.css({position:"absolute",left:n.x+"px",top:n.y+"px"}).attr("titleId",n.id),"img"==n.type&&n.target.attr("draggable","false"),!n.clickable&&n.target.css({"pointer-events":"none"}),0==n.visible&&n.target.css("display","none"),n.index&&n.target.css("z-index",n.index),n.title&&n.target.attr("p_title",GCTConv(n.title)),n.width&&n.target.css("width",n.width+"px"),n.height&&n.target.css("height",n.height+"px"),n.class&&n.target.attr({class:n.class}),"img"==n.type?n.src?n.target.attr("src",n.src):n.txtsrc&&n.target.attr("src",gizmoImageObj[n.txtsrc].src):(n.src?n.target.css({background:"url("+n.src+") no-repeat"}):n.txtsrc&&n.target.css({background:"url("+gizmoImageObj[n.txtsrc].src+") no-repeat"}),n.target.css({"background-size":"100% 100%"}))},this.getElem=function(){return n.target},this.getSrc=function(){return n.target},this.getId=function(){return n.id},this.setSource=function(e){"img"==n.type?n.target.attr("src",e):n.target.css({background:"url("+e+") no-repeat","background-size":"100% 100%"})},this.setTxtSource=function(e){"img"==n.type?n.target.attr("src",gizmoImageObj[e].src):n.target.css({background:"url("+gizmoImageObj[e].src+") no-repeat"})},this.animStart=function(e,t,i,o,a){a=void 0===a?function(){}:a,"fadeIn"==e||"fadeOut"==e?n.target[e](t,a):"animate"==e&&(o=void 0===o?"linear":o,n.target[e](i,t,o,a))},this.animStop=function(e,t){e=void 0!==e&&e,t=void 0!==t&&t,n.target.stop(e,t)},this.show=function(){n.target.show()},this.hide=function(){n.target.hide()},this.enable=function(){n.target.css("opacity",1)},this.disable=function(){n.target.css("opacity",.5)},this.setPosition=function(e){n.target.css({position:"absolute",left:e.x+"px",top:e.y+"px"})},this.setStyle=function(e){n.target.css(e)},this.setTitle=function(e){n.target.attr("p_title",GCTConv(e))}},TracePad=function(){var a,n={id:"tracePadComp",x:0,y:0,width:300,height:300,border:!1};this.init=function(e){for(var t in e)n[t]=e[t];n.x=globalResizeCalc(n.x),n.y=globalResizeCalc(n.y),n.width=globalResizeCalc(n.width),n.height=globalResizeCalc(n.height),a=document.createElement("canvas"),a.getContext("2d"),n.target&&(n.target.css({position:"absolute"}),n.target.append(a),a.width=n.width,a.height=n.height,$(a).css({position:"absolute",left:n.x+"px",top:n.y+"px","background-color":n.bgColor,"box-shadow":n.bgShadow}).attr("id","canvas_"+n.id),n.index&&$(a).css("z-index",n.index),0==n.visible&&n.target.css("display","none"),n.border&&$(a).css("border","0.1em solid red")),BrowserDetect.any()?($(a).unbind("touchstart",u).bind("touchstart",u),$(a).unbind("touchmove",u).bind("touchmove",u),$(a).unbind("touchend",u).bind("touchend",u),$(window).unbind("touchmove",u).bind("touchmove",u)):BrowserDetect.ChromeBook()||BrowserDetect.WindowsTouch()?($(a).unbind("touchstart mousedown",u).bind("touchstart mousedown",u),$(a).unbind("touchmove mousemove",u).bind("touchmove mousemove",u),$(a).unbind("touchend mouseup",u).bind("touchend mouseup",u),$(a).unbind("mouseover",u).bind("mouseover",u),$(a).unbind("mouseout",u).bind("mouseout",u)):($(a).unbind("mousedown",u).bind("mousedown",u),$(a).unbind("mousemove",u).bind("mousemove",u),$(a).unbind("mouseover",u).bind("mouseover",u),$(a).unbind("mouseout",u).bind("mouseout",u),$(a).unbind("mouseup",u).bind("mouseup",u))},this.show=function(){$(a).show()},this.hide=function(){$(a).hide()},this.addTitle=function(e){void 0===e||""==e?$(a).removeAttr("p_title"):$(a).attr("p_title",e)},this.addEventListener=function(e,t){n[e]=t};var s,r,l,d,c=!(this.removeEventListener=function(e){delete n[e]}),p=!1;function u(e){var t=!1;"touchstart"!=e.type&&"touchmove"!=e.type||(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY,l=e.pageX,d=e.pageY),"touchend"==e.type&&(e.pageX=l,e.pageY=d);var i=e.pageX-$(a).offset().left,o=e.pageY-$(a).offset().top;"mousedown"==e.type||"touchstart"==e.type?(s=i,r=o,focusOutInput(),BrowserDetect.any()||($(a).unbind("mousemove",u),$(window).unbind("mousemove",u).bind("mousemove",u),$(window).unbind("mouseup",u).bind("mouseup",u)),p=!(c=!1),e.type="mousedown"):"mousemove"==e.type||"touchmove"==e.type?(s==i&&r==o&&(t=!0),e.type="mousemove",(i<0||i>n.width||o<0||o>n.height)&&!c&&p&&(c=!0,e.type="mouseout"),0<=i&&i<=n.width&&0<=o&&o<=n.height&&c&&p&&(c=!1,e.type="mouseover")):"mouseup"!=e.type&&"touchend"!=e.type||(p=c=!1,BrowserDetect.any()||($(window).unbind("mouseup",u),$(window).unbind("mousemove",u),$(a).unbind("mousemove",u).bind("mousemove",u)),e.type="mouseup"),e.x=i,e.y=o,e.id=n.id,t||n.mouseEvent&&n.mouseEvent(e),e.preventDefault()}},BreedingFormula=function(){this.createChild=function(e,t){var i=new Object,o=e.getFurColor()+t.getFurColor(),a=(e.getEyeColor(),t.getEyeColor());if(i.color1=String(o).charAt(parseInt(getRandomNum(0,1))),i.color2=String(o).charAt(2+parseInt(getRandomNum(0,1))),parseInt(i.color1.charCodeAt(0))>parseInt(i.color2.charCodeAt(0))){var n=i.color1;i.color1=i.color2,i.color2=n}i.color=i.color1+i.color2;a=e.getEyeColor()+t.getEyeColor();if(i.eye1=String(a).charAt(parseInt(getRandomNum(0,1))),i.eye2=String(a).charAt(2+parseInt(getRandomNum(0,1))),parseInt(i.eye1.charCodeAt(0))>parseInt(i.eye2.charCodeAt(0))){n=i.eye1;i.eye1=i.eye2,i.eye2=n}i.eye=i.eye1+i.eye2;var s=0,r=0,l=0,d=0;switch(i.color){case"FF":switch(i.eye){case"EE":i.mouseType="mouse_1",s++;break;case"ee":i.mouseType="mouse_2",r++;break;case"Ee":i.mouseType="mouse_1",s++}break;case"ff":switch(i.eye){case"EE":i.mouseType="mouse_3",l++;break;case"ee":i.mouseType="mouse_4",d++;break;case"Ee":i.mouseType="mouse_3",l++}break;case"Ff":switch(i.eye){case"EE":i.mouseType="mouse_1",s++;break;case"ee":i.mouseType="mouse_2",r++;break;case"Ee":i.mouseType="mouse_1",s++}}return i.children=s+" "+r+" "+l+" "+d,i}},PopUpComp=function(){var i,a,n,d={target:gConfig.elContainer,id:"popUp",x:250,y:250,text:"Please put your test here.",width:250,height:250,textAlign:"center",fontSize:"0.85em",paddingTop:5,paddingLeft:5,pointerDir:4,pointerPos:"middle",pointerSize:100,index:1,pointerRadius:10,bg:"#ff0",border:"0.1em solid #999",shadow:"rgba(0, 0, 0, 0.5) 3px 3px 5px",pointerLineWidth:2,pointerLineColor:"rgb(0,0,0)",pointerFillColor:"rgb(255,255,0)",pointedHead:!1};function o(){var e=0,t=0,i=n.getContext("2d");i.beginPath();var o=2*d.pointerRadius+2*d.pointerLineWidth;switch(Number(d.pointerDir)){case 1:if(n.width=d.pointerSize,n.height=o,n.width=n.width,e=-1*d.pointerSize,isNaN(d.pointerPos))switch(d.pointerPos){case"middle":t=$(a).outerHeight()/2-n.height/2;break;case"start":t=-n.height/2+d.pointerLineWidth/2;break;case"end":t=$(a).outerHeight()-n.height/2-d.pointerLineWidth/2}else t=d.pointerPos;i.moveTo(d.pointerRadius+d.pointerLineWidth,n.height/2),i.lineTo(n.width,n.height/2),i.moveTo(d.pointerRadius+d.pointerLineWidth,n.height/2),d.pointedHead?s(i,{x:n.width,y:n.height/2},{x:d.pointerRadius+d.pointerLineWidth,y:n.height/2}):i.arc(d.pointerRadius+d.pointerLineWidth,n.height/2,d.pointerRadius,0,2*Math.PI);break;case 2:if(n.width=o,n.height=d.pointerSize,n.width=n.width,isNaN(d.pointerPos))switch(d.pointerPos){case"middle":e=$(a).outerWidth()/2-n.width/2;break;case"start":e=-n.width/2+d.pointerLineWidth/2;break;case"end":e=$(a).outerWidth()-n.width/2-d.pointerLineWidth/2}else e=d.pointerPos;t=-1*d.pointerSize+globalResizeCalc(1),i.moveTo(n.width/2,d.pointerRadius+d.pointerLineWidth),i.lineTo(n.width/2,n.height),i.moveTo(n.width/2,d.pointerRadius+d.pointerLineWidth),d.pointedHead?s(i,{x:n.width/2,y:n.height},{x:n.width/2,y:d.pointerRadius+d.pointerLineWidth}):i.arc(n.width/2,d.pointerRadius+d.pointerLineWidth,d.pointerRadius,0,2*Math.PI);break;case 3:if(n.width=d.pointerSize,n.height=o,n.width=n.width,isNaN(d.pointerPos))switch(d.pointerPos){case"middle":t=$(a).outerHeight()/2-n.height/2;break;case"start":t=n.height/2+d.pointerLineWidth/2;break;case"end":t=$(a).outerHeight()-n.height/2-d.pointerLineWidth/2}else t=d.pointerPos;e=d.width,i.moveTo(n.width-d.pointerRadius-d.pointerLineWidth,n.height/2),i.lineTo(0,n.height/2),i.moveTo(n.width-d.pointerRadius-d.pointerLineWidth,n.height/2),d.pointedHead?s(i,{x:0,y:n.height/2},{x:n.width-d.pointerRadius-d.pointerLineWidth,y:n.height/2}):i.arc(n.width-d.pointerRadius-d.pointerLineWidth,n.height/2,d.pointerRadius,0,2*Math.PI);break;case 4:if(n.width=o,n.height=d.pointerSize,n.width=n.width,isNaN(d.pointerPos))switch(d.pointerPos){case"middle":e=$(a).outerWidth()/2-n.width/2-d.pointerLineWidth/2;break;case"start":e=-n.width/2+d.pointerLineWidth/2;break;case"end":e=$(a).outerWidth()-n.width/2-d.pointerLineWidth/2}else e=d.pointerPos;t=$(a).outerHeight(),i.moveTo(n.width/2,n.height-d.pointerRadius-d.pointerLineWidth),i.lineTo(n.width/2,0),i.moveTo(n.width/2,n.height-d.pointerRadius-d.pointerLineWidth),d.pointedHead?s(i,{x:n.width/2,y:0},{x:n.width/2,y:n.height-d.pointerRadius-d.pointerLineWidth}):i.arc(n.width/2,n.height-d.pointerRadius-d.pointerLineWidth,d.pointerRadius,0,2*Math.PI)}i.lineWidth=d.pointerLineWidth,i.lineCap="round",i.strokeStyle=d.pointerLineColor,i.stroke(),i.fillStyle=d.pointerFillColor,i.fill(),i.closePath(),$(n).css({position:"absolute",left:e,top:t})}function s(e,t,i){var o=Maths.getAngle(t,i,!0),a=o+45*Maths.TO_RADIANS,n=o-45*Maths.TO_RADIANS,s=Maths.getPoint(i,o+Math.PI,d.pointerRadius-d.pointerLineWidth),r=Maths.getPoint(i,a,.75*d.pointerRadius),l=Maths.getPoint(i,n,.75*d.pointerRadius);e.moveTo(s.x,s.y),e.lineTo(r.x,r.y),e.lineTo(i.x,i.y),e.lineTo(l.x,l.y),e.lineTo(s.x,s.y)}this.init=function(e){for(var t in e)d[t]=e[t];d.x=globalResizeCalc(d.x),d.y=globalResizeCalc(d.y),d.width=globalResizeCalc(d.width),d.height=globalResizeCalc(d.height),d.paddingLeft=globalResizeCalc(d.paddingLeft),d.paddingTop=globalResizeCalc(d.paddingTop),d.pointerPos=isNaN(d.pointerPos)?d.pointerPos:globalResizeCalc(d.pointerPos),d.pointerSize=globalResizeCalc(d.pointerSize),d.pointerRadius=globalResizeCalc(d.pointerRadius),d.pointerLineWidth=globalResizeCalc(d.pointerLineWidth),i=document.createElement("div"),a=document.createElement("div"),n=document.createElement("canvas"),$(d.target).append(i),$(i).append(a),$(i).append(n),$(i).css({position:"absolute",left:d.x+"px",top:d.y+"px","z-index":d.index,cursor:"default"}),$(a).css({position:"absolute",left:"0px",top:"0px","font-size":d.fontSize,"text-align":d.textAlign,width:d.width,padding:d.paddingLeft+"px "+d.paddingTop+"px",background:d.bg,border:d.border,"box-shadow":d.shadow,display:"inline-block","z-index":1}).text(d.text),o()},this.show=function(e){$(i).show()},this.hide=function(){$(i).hide()},this.setText=function(e){$(a).text(e)},this.addEventListener=function(e,t){d[e]=t},this.setStyle=function(e){$(d.target).css(e)},this.updateVals=function(e){for(var t in e)d[t]=e[t];o()}},FractionLabel=function(){var r,i,l={x:0,y:0,align:"left",html:"",border:"none",bold:!1,fontFamily:"inherit",fontSize:"1em",bgColor:"",paddingTop:0,marginLeft:10,lineSize:"0.1em",fractionPading:"0.05em",minHeight:50,fractionPaddingLR:0,htmlArr:[]},a=this,d="black";function c(e,t,i){var o=""+e,a=o.indexOf(t)+t.length,n=o.indexOf(i),s=o.substring(a,n);if(0<a&&0<n)return s}this.init=function(e){for(var t in e)l[t]=e[t];l.x=globalResizeCalc(l.x),l.y=globalResizeCalc(l.y),l.marginLeft=globalResizeCalc(l.marginLeft),l.fractionPaddingLR=globalResizeCalc(l.fractionPaddingLR),l.minHeight&&(l.minHeight=globalResizeCalc(l.minHeight)),l.fractDivWidth&&(l.fractDivWidth=globalResizeCalc(l.fractDivWidth)),l.wholeDivWidth&&(l.wholeDivWidth=globalResizeCalc(l.wholeDivWidth)),l.width&&(l.width=globalResizeCalc(l.width)),l.height&&(l.height=globalResizeCalc(l.height)),l.bold=l.bold?"bold":"normal",r=document.createElement("div"),i=document.createElement("div"),$(i).append(r),l.target?l.target.append(i):$(gConfig.elContainer).append(i),l.target=$(i),0==l.visible&&l.target.css("display","none"),l.index&&l.target.css("z-index",l.index),l.title&&l.target.attr("p_title",GCTConv(l.title)),l.target.attr("id",l.id),l.target.css({position:"absolute",left:l.x+"px",top:l.y+"px","font-family":l.fontFamily,"text-align":l.align,"font-weight":l.bold,"font-size":l.fontSize,cursor:"default"}),l.border&&l.target.css({border:l.border}),l.bgColor&&l.target.css({background:l.bgColor}),l.width&&l.target.css("width",l.width+"px"),l.height&&l.target.css("height",l.height+"px"),"right"==l.align?$(r).css({position:"absolute",right:"0px"}):"center"==l.align&&$(r).css({position:"relative",margin:"0 auto",display:"inline-block"}),this.setText(l.html)},this.setText=function(e){$(r).empty(),l.htmlArr=[];var t=document.createElement("div");if($(r).append(t),$(t).css({width:"auto",display:"table"}),$(t).css("height","0px"),l.minHeight&&$(t).css("min-height",l.minHeight),e){l.html=l.emdash?e.replace(/-/g,"&ndash;"):e;for(var i=l.html.split("~|"),o=0;o<i.length;o++){var a=tempDeno=_tempDiv=void 0,n=c(i[o],"~color|","|color~");if(n&&(d=n,i[o]=i[o].split("|color~")[1]),_tempDiv=document.createElement("div"),-1!=i[o].indexOf("~frac")){$(_tempDiv).addClass(l.id+"fraction");var s=i[o].split("~frac");2==s.length&&(a=document.createElement("span"),$(a).html(s[0]).addClass(l.id+"top"),tempDeno=document.createElement("span"),$(tempDeno).html(s[1]).addClass(l.id+"bottom"),l.fractDivWidth&&$(tempDeno).css("width",l.fractDivWidth),$(_tempDiv).append(a).append(tempDeno)),l.htmlArr.push({n:$(a).text(),d:$(tempDeno).text()})}else $(_tempDiv).html(i[o]),$(_tempDiv).addClass(l.id+"Whole"),l.htmlArr.push({w:$(_tempDiv).text()}),l.wholeDivWidth&&$(_tempDiv).css("width",l.wholeDivWidth);$(t).append(_tempDiv),d&&($(_tempDiv).css({display:"table-cell",color:d+" !important"}),-1!=i[o].indexOf("~frac")&&($(a).css({color:d+" !important"}),$(tempDeno).css({"border-top":l.lineSize+" solid "+d,color:d+" !important"})))}$("."+l.id+"fraction").outerHeight(!0);$("."+l.id+"Whole").css({"vertical-align":"middle","word-break":"normal"}),$("."+l.id+"fraction").css({display:"inline-block","text-align":"center",margin:l.lineSize+" "+l.marginLeft+"px","font-weight":l.bold,"box-sizing":"border-box","word-break":"normal"}),$("."+l.id+"top").css({display:"inline-block","padding-bottom":l.fractionPading,"word-break":"normal"}),l.topColor&&$("."+l.id+"top").css({color:l.topColor}),$("."+l.id+"bottom").css({"padding-top":l.fractionPading,"padding-left":l.fractionPaddingLR,"padding-right":l.fractionPaddingLR,display:"block","word-break":"normal"}),l.barColor&&$("."+l.id+"bottom").css({"border-top":l.lineSize+" solid "+l.barColor}),l.bottomColor&&$("."+l.id+"bottom").css({color:l.bottomColor}),$(r).css({"padding-top":globalResizeCalc(l.paddingTop)+"px"}),l.align}},this.getValue=function(){return l.htmlArr},this.getWidth=function(){return $(r).children().outerWidth()},this.setStyle=function(e){l.target.css(e)};var n=!0;this.show=function(e){p&&(n=!0,l.target.show(),l.isShown&&l.isShown({show:!0,isFromSetter:e}))},this.hide=function(e){n=!1,l.target.hide(),l.isShown&&l.isShown({show:!1,isFromSetter:e})},this.visibilityFlag=function(){return n},this.addEventListener=function(e,t){l[e]=t};var s=!0;this.enable=function(){u&&(s=!0,l.target.css("opacity",1))},this.disable=function(){s=!1,l.target.css("opacity",.5)},this.getGSvisible=function(){return p},this.setGSvisible=function(e){p=e},this.getGSenable=function(){return u},this.setGSenable=function(e){u=e};var p=!0,u=!0;this.getter=function(){var e=new Object;e.caption=l.caption?l.caption:l.id,e.common=!0,e.componentname="TextLabelComp";var t=a.getValue();if(l.removeSpace)for(var i in t)for(var o in t[i])t[i][o]=isNaN(t[i][o])?t[i][o]:t[i][o].toString(),t[i][o]=t[i][o].trim().replace(/\s/gi,"");for(var i in t)for(var o in t[i])""!=t[i][o]&&(t[i][o]=isNaN(t[i][o])?t[i][o]:Number(t[i][o]));return e.values={fraction:t},e.settable=l.setable,e.enabled=getterSetter.isFromInit?s:u,e.visible=getterSetter.isFromInit?n:p,e},this.setter=function(e){p!=e.visible&&((p=e.visible)?a.show(!0):a.hide(!0)),u!=e.enabled&&((u=e.enabled)?a.enable():a.disable()),getterSetter.isFromReset&&(u=p=!0)},this.isSetable=function(){return l.setable},this.getCaption=function(){return l.caption}};